{"version":3,"file":"Dialog.js","sources":["../../src/dialog/Dialog.tsx"],"sourcesContent":["import React, { forwardRef, useEffect, useRef, useImperativeHandle } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport classNames from 'classnames';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { TdDialogProps, DialogInstance } from './type';\nimport { StyledProps } from '../common';\nimport Portal from '../common/Portal';\nimport useSetState from '../_util/useSetState';\nimport useConfig from '../hooks/useConfig';\nimport { dialogDefaultProps } from './defaultProps';\nimport DialogCard from './DialogCard';\nimport useDialogEsc from './hooks/useDialogEsc';\nimport useLockStyle from './hooks/useLockStyle';\nimport useDialogPosition from './hooks/useDialogPosition';\nimport useDialogDrag from './hooks/useDialogDrag';\nimport { parseValueToPx } from './utils';\nimport log from '../_common/js/log';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface DialogProps extends TdDialogProps, StyledProps {\n  isPlugin?: boolean; // 是否以插件形式调用\n}\n\nconst Dialog = forwardRef<DialogInstance, DialogProps>((originalProps, ref) => {\n  const props = useDefaultProps<DialogProps>(originalProps, dialogDefaultProps);\n  const { children, ...restProps } = props;\n  const { classPrefix } = useConfig();\n\n  const componentCls = `${classPrefix}-dialog`;\n  const wrapRef = useRef<HTMLDivElement>();\n  const maskRef = useRef<HTMLDivElement>();\n  const contentClickRef = useRef(false);\n  const dialogCardRef = useRef<HTMLDivElement>();\n  const dialogPosition = useRef();\n  const portalRef = useRef();\n  const [state, setState] = useSetState<DialogProps>({ isPlugin: false, ...restProps });\n  const [local] = useLocaleReceiver('dialog');\n\n  const {\n    className,\n    dialogClassName,\n    style,\n    width,\n    mode,\n    zIndex,\n    visible,\n    attach,\n    onOpened,\n    onCancel,\n    onConfirm,\n    onClose,\n    onClosed,\n    isPlugin,\n    draggable,\n    onOverlayClick,\n    onEscKeydown,\n    closeOnEscKeydown,\n    confirmOnEnter,\n    showOverlay,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    destroyOnClose,\n    preventScrollThrough,\n    onCloseBtnClick,\n    forceRender = false,\n    ...restState\n  } = state;\n\n  useLockStyle({ preventScrollThrough, visible, mode, showInAttachedElement });\n  useDialogEsc(visible, wrapRef);\n  useDialogPosition(visible, dialogCardRef);\n  const { onDialogMoveStart } = useDialogDrag({\n    dialogCardRef,\n    contentClickRef,\n    canDraggable: draggable && mode === 'modeless',\n  });\n\n  useEffect(() => {\n    if (isPlugin) {\n      return;\n    }\n    // 插件式调用不会更新props, 只有组件式调用才会更新props\n    setState((prevState) => ({ ...prevState, ...props }));\n  }, [props, setState, isPlugin]);\n\n  useImperativeHandle(ref, () => ({\n    show() {\n      setState({ visible: true });\n    },\n    hide() {\n      setState({ visible: false });\n    },\n    setConfirmLoading: (loading: boolean) => {\n      setState({ confirmLoading: loading });\n    },\n    destroy() {\n      setState({ visible: false, destroyOnClose: true });\n    },\n    update(newOptions) {\n      setState((prevState) => ({ ...prevState, ...newOptions }));\n    },\n  }));\n\n  // @ts-ignore 兼容旧版本 2.0 移除\n  if (props.mode === 'normal') {\n    log.error('Dialog', 'mode=\"normal\" is not supported, please use DialogCard.');\n    return <DialogCard {...props} />;\n  }\n\n  const onMaskClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (showOverlay && (closeOnOverlayClick ?? local.closeOnOverlayClick)) {\n      // 判断点击事件初次点击是否为内容区域\n      if (contentClickRef.current) {\n        contentClickRef.current = false;\n      } else if (e.target === dialogPosition.current) {\n        onOverlayClick?.({ e });\n        onClose?.({ e, trigger: 'overlay' });\n      }\n    }\n  };\n\n  const handleCancel = ({ e }) => {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: 'cancel' });\n  };\n\n  const handleClose = ({ e }) => {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: 'close-btn' });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n    if (e.key === 'Escape') {\n      e.stopPropagation();\n      onEscKeydown?.({ e });\n      if (closeOnEscKeydown ?? local.closeOnEscKeydown) {\n        onClose?.({ e, trigger: 'esc' });\n      }\n    } else if (e.key === 'Enter' || e.key === 'NumpadEnter') {\n      // 回车键触发点击确认事件\n      e.stopPropagation();\n      confirmOnEnter && onConfirm?.({ e });\n    }\n  };\n\n  const onAnimateLeave = () => {\n    onClosed?.();\n\n    if (!wrapRef.current) return;\n    wrapRef.current.style.display = 'none';\n  };\n\n  const onAnimateStart = () => {\n    if (!wrapRef.current) return;\n    wrapRef.current.style.display = 'block';\n  };\n\n  const onInnerAnimateStart = () => {\n    if (!dialogCardRef.current) return;\n    dialogCardRef.current.style.display = 'block';\n  };\n\n  const onInnerAnimateLeave = () => {\n    if (!dialogCardRef.current) return;\n    dialogCardRef.current.style.display = 'none';\n  };\n\n  const renderMask = () => {\n    if (mode !== 'modal') return null;\n\n    return showOverlay ? (\n      <CSSTransition\n        in={visible}\n        appear\n        timeout={300}\n        classNames={`${componentCls}-fade`}\n        mountOnEnter\n        unmountOnExit\n        nodeRef={maskRef}\n      >\n        <div ref={maskRef} className={`${componentCls}__mask`} />\n      </CSSTransition>\n    ) : null;\n  };\n  return (\n    <CSSTransition\n      in={visible}\n      appear\n      timeout={300}\n      mountOnEnter={!forceRender}\n      unmountOnExit={destroyOnClose}\n      nodeRef={portalRef}\n      onEnter={onAnimateStart}\n      onEntered={onOpened}\n      onExited={onAnimateLeave}\n    >\n      <Portal attach={attach} ref={portalRef}>\n        <div\n          ref={wrapRef}\n          className={classNames(className, `${componentCls}__ctx`, `${componentCls}__${mode}`, {\n            [`${componentCls}__ctx--fixed`]: !showInAttachedElement,\n            [`${componentCls}__ctx--absolute`]: showInAttachedElement,\n          })}\n          style={{ zIndex, display: 'none' }}\n          onKeyDown={handleKeyDown}\n          tabIndex={0}\n        >\n          {renderMask()}\n          <div className={`${componentCls}__wrap`}>\n            <div\n              ref={dialogPosition}\n              className={classNames(`${componentCls}__position`, {\n                [`${componentCls}--top`]: !!props.top || props.placement === 'top',\n                [`${componentCls}--center`]: props.placement === 'center' && !props.top,\n              })}\n              style={{ paddingTop: parseValueToPx(props.top) }}\n              onClick={onMaskClick}\n            >\n              <CSSTransition\n                in={visible}\n                appear\n                timeout={300}\n                classNames={`${componentCls}-zoom`}\n                nodeRef={dialogCardRef}\n                onEnter={onInnerAnimateStart}\n                onExited={onInnerAnimateLeave}\n              >\n                <DialogCard\n                  ref={dialogCardRef}\n                  {...restState}\n                  className={dialogClassName}\n                  style={{ ...style, width: parseValueToPx(width || style?.width) }}\n                  onConfirm={onConfirm}\n                  onCancel={handleCancel}\n                  onCloseBtnClick={handleClose}\n                  onMouseDown={onDialogMoveStart}\n                >\n                  {children}\n                </DialogCard>\n              </CSSTransition>\n            </div>\n          </div>\n        </div>\n      </Portal>\n    </CSSTransition>\n  );\n});\n\nDialog.displayName = 'Dialog';\n\nexport default Dialog;\n"],"names":["Dialog","forwardRef","originalProps","ref","props","useDefaultProps","dialogDefaultProps","children","restProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","componentCls","wrapRef","useRef","maskRef","contentClickRef","dialogCardRef","dialogPosition","portalRef","_useSetState","useSetState","_objectSpread","isPlugin","_useSetState2","_slicedToArray","state","setState","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","local","className","dialogClassName","style","width","mode","zIndex","visible","attach","onOpened","onCancel","onConfirm","onClose","onClosed","draggable","onOverlayClick","onEscKeydown","closeOnEscKeydown","confirmOnEnter","showOverlay","showInAttachedElement","closeOnOverlayClick","destroyOnClose","preventScrollThrough","onCloseBtnClick","_state$forceRender","forceRender","restState","_excluded2","useLockStyle","useDialogEsc","useDialogPosition","_useDialogDrag","useDialogDrag","canDraggable","onDialogMoveStart","useEffect","prevState","useImperativeHandle","show","hide","setConfirmLoading","loading","confirmLoading","destroy","update","newOptions","log","error","React","createElement","DialogCard","onMaskClick","e","current","target","trigger","handleCancel","_ref","handleClose","_ref2","handleKeyDown","key","stopPropagation","onAnimateLeave","display","onAnimateStart","onInnerAnimateStart","onInnerAnimateLeave","renderMask","CSSTransition","appear","timeout","classNames","mountOnEnter","unmountOnExit","nodeRef","onEnter","onEntered","onExited","Portal","concat","_defineProperty","onKeyDown","tabIndex","top","placement","paddingTop","parseValueToPx","onClick","onMouseDown","displayName"],"mappings":"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"}