{"version":3,"file":"BreadcrumbItem.js","sources":["../../src/breadcrumb/BreadcrumbItem.tsx"],"sourcesContent":["import React, { forwardRef, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport { ChevronRightIcon as TdChevronRightIcon } from 'tdesign-icons-react';\nimport isFunction from 'lodash/isFunction';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport { BreadcrumbItemProps } from './BreadcrumbProps';\nimport { BreadcrumbContext } from './BreadcrumbContext';\nimport parseTNode from '../_util/parseTNode';\nimport { breadcrumbItemDefaultProps } from './defaultProps';\nimport { isNodeOverflow } from '../_util/dom';\nimport { TooltipLite } from '../tooltip';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nconst BreadcrumbItem = forwardRef<HTMLDivElement, BreadcrumbItemProps>((props, ref) => {\n  const { classPrefix } = useConfig();\n  const commonClassNames = useCommonClassName();\n  const { ChevronRightIcon } = useGlobalIcon({ ChevronRightIcon: TdChevronRightIcon });\n\n  const {\n    children,\n    separator,\n    disabled,\n    maxItemWidth,\n    maxWidth,\n    icon,\n    href,\n    to,\n    target,\n    router,\n    replace,\n    className,\n    content,\n    onClick,\n    ...restProps\n  } = useDefaultProps<BreadcrumbItemProps>(props, breadcrumbItemDefaultProps);\n\n  const { maxItemWidthInContext, separator: separatorInContext } = useContext(BreadcrumbContext);\n  const breadcrumbText = useRef<HTMLSpanElement>(null);\n  const [isCutOff, setIsCutOff] = useState(false);\n\n  const breadcrumbItemClassNames = classNames(`${classPrefix}-breadcrumb__item`);\n  const textWrapperClassName = `${classPrefix}-breadcrumb__inner`;\n  const textClassName = `${classPrefix}-breadcrumb__inner-text`;\n\n  const textClassNames = classNames(`${classPrefix}-breadcrumb--text-overflow`, {\n    [commonClassNames.STATUS.disabled]: disabled,\n  });\n  const separatorClassName = `${classPrefix}-breadcrumb__separator`;\n  const linkClassName = `${classPrefix}-link`;\n\n  const maxWidthForItem = useMemo(\n    () => ({\n      maxWidth: maxWidth || maxItemWidth || maxItemWidthInContext || '120px',\n    }),\n    [maxItemWidth, maxWidth, maxItemWidthInContext],\n  );\n\n  useEffect(() => {\n    if (!breadcrumbText.current) return;\n    return setIsCutOff(isNodeOverflow(breadcrumbText.current));\n  }, [breadcrumbText]);\n\n  const textContent = (\n    <span className={textWrapperClassName} style={maxWidthForItem}>\n      {isFunction(icon) ? icon() : icon}\n      <span ref={breadcrumbText} className={textClassName}>\n        {children || content}\n      </span>\n    </span>\n  );\n\n  let itemContent = <span className={textClassNames}>{textContent}</span>;\n  if ((href || to) && !disabled) {\n    const handleRouting = () => {\n      if (href || !router) return;\n\n      replace ? router.replace(to) : router.push(to);\n    };\n    itemContent = (\n      <a className={classNames(textClassNames, linkClassName)} href={href} target={target} onClick={handleRouting}>\n        {textContent}\n      </a>\n    );\n  }\n\n  const separatorInProps = parseTNode(separator);\n  const separatorContent = separatorInProps || separatorInContext || (\n    <ChevronRightIcon style={{ color: 'rgba(0,0,0,.3)' }} />\n  );\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (disabled) return;\n    onClick?.(e);\n  };\n\n  return (\n    <div className={classNames(breadcrumbItemClassNames, className)} ref={ref} onClick={handleClick} {...restProps}>\n      {isCutOff ? <TooltipLite content={children || content}>{itemContent}</TooltipLite> : itemContent}\n      <span className={separatorClassName}>{separatorContent}</span>\n    </div>\n  );\n});\n\nBreadcrumbItem.displayName = 'BreadcrumbItem';\n\nexport default BreadcrumbItem;\n"],"names":["BreadcrumbItem","forwardRef","props","ref","_useConfig","useConfig","classPrefix","commonClassNames","useCommonClassName","_useGlobalIcon","useGlobalIcon","ChevronRightIcon","TdChevronRightIcon","_useDefaultProps","useDefaultProps","breadcrumbItemDefaultProps","children","separator","disabled","maxItemWidth","maxWidth","icon","href","to","target","router","replace","className","content","onClick","restProps","_objectWithoutProperties","_excluded","_useContext","useContext","BreadcrumbContext","maxItemWidthInContext","separatorInContext","breadcrumbText","useRef","_useState","useState","_useState2","_slicedToArray","isCutOff","setIsCutOff","breadcrumbItemClassNames","classNames","concat","textWrapperClassName","textClassName","textClassNames","_defineProperty","STATUS","separatorClassName","linkClassName","maxWidthForItem","useMemo","useEffect","current","isNodeOverflow","textContent","React","createElement","style","isFunction","itemContent","handleRouting","push","separatorInProps","parseTNode","separatorContent","color","handleClick","e","_objectSpread","TooltipLite","displayName"],"mappings":"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"}