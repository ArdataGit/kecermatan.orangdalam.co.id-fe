{"version":3,"file":"SinglePanel.js","sources":["../../../src/date-picker/panel/SinglePanel.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../hooks/useConfig';\nimport { StyledProps } from '../../common';\nimport PanelContent from './PanelContent';\nimport ExtraContent from './ExtraContent';\nimport { TdDatePickerProps } from '../type';\nimport type { TdTimePickerProps } from '../../time-picker';\nimport { getDefaultFormat, parseToDayjs } from '../../_common/js/date-picker/format';\nimport useTableData from '../hooks/useTableData';\nimport useDisableDate from '../hooks/useDisableDate';\nimport useDefaultProps from '../../hooks/useDefaultProps';\n\nexport interface SinglePanelProps extends TdDatePickerProps, StyledProps {\n  year?: number;\n  month?: number;\n  time?: string;\n  popupVisible?: boolean;\n  onPanelClick?: (context: { e: React.MouseEvent<HTMLDivElement> }) => void;\n  onCellClick?: (date: Date, context: { e: React.MouseEvent<HTMLDivElement> }) => void;\n  onCellMouseEnter?: (date: Date) => void;\n  onCellMouseLeave?: (context: { e: React.MouseEvent<HTMLDivElement> }) => void;\n  onJumperClick?: (context: { e?: MouseEvent; trigger: string }) => void;\n  onConfirmClick?: (context: { e: React.MouseEvent<HTMLButtonElement> }) => void;\n  onPresetClick?: any;\n  onYearChange?: (year: number) => void;\n  onMonthChange?: (month: number) => void;\n  onTimePickerChange?: TdTimePickerProps['onChange'];\n}\n\nconst SinglePanel = forwardRef<HTMLDivElement, SinglePanelProps>((originalProps, ref) => {\n  const { classPrefix, datePicker: globalDatePickerConfig } = useConfig();\n  const panelName = `${classPrefix}-date-picker__panel`;\n  const props = useDefaultProps<SinglePanelProps>(originalProps, {\n    mode: 'date',\n    enableTimePicker: false,\n    presetsPlacement: 'bottom',\n  });\n  const {\n    value,\n    mode,\n    presetsPlacement,\n    firstDayOfWeek = globalDatePickerConfig.firstDayOfWeek,\n\n    style,\n    className,\n    year,\n    month,\n    onPanelClick,\n  } = props;\n\n  const { format } = getDefaultFormat({\n    mode: props.mode,\n    format: props.format,\n    enableTimePicker: props.enableTimePicker,\n  });\n\n  const disableDateOptions = useDisableDate({ disableDate: props.disableDate, mode: props.mode, format });\n\n  const tableData = useTableData({\n    year,\n    month,\n    mode,\n    start: value ? parseToDayjs(value, format).toDate() : undefined,\n    firstDayOfWeek,\n    ...disableDateOptions,\n  });\n\n  const panelContentProps = {\n    mode,\n    value,\n    year,\n    month,\n    format,\n    firstDayOfWeek,\n    tableData,\n    popupVisible: props.popupVisible,\n\n    time: props.time,\n    timePickerProps: props.timePickerProps,\n    enableTimePicker: props.enableTimePicker,\n    onMonthChange: props.onMonthChange,\n    onYearChange: props.onYearChange,\n    onJumperClick: props.onJumperClick,\n    onCellClick: props.onCellClick,\n    onCellMouseEnter: props.onCellMouseEnter,\n    onCellMouseLeave: props.onCellMouseLeave,\n    onTimePickerChange: props.onTimePickerChange,\n  };\n\n  const extraProps = {\n    presets: props.presets,\n    enableTimePicker: props.enableTimePicker,\n    presetsPlacement: props.presetsPlacement,\n    onPresetClick: props.onPresetClick,\n    onConfirmClick: props.onConfirmClick,\n    selectedValue: props.value,\n  };\n\n  return (\n    <div\n      ref={ref}\n      style={style}\n      className={classNames(panelName, className, {\n        [`${panelName}--direction-row`]: ['left', 'right'].includes(presetsPlacement),\n      })}\n      onClick={(e) => onPanelClick?.({ e })}\n    >\n      {['top', 'left'].includes(presetsPlacement) ? <ExtraContent {...extraProps} /> : null}\n      <PanelContent {...panelContentProps} />\n      {['bottom', 'right'].includes(presetsPlacement) ? <ExtraContent {...extraProps} /> : null}\n    </div>\n  );\n});\n\nSinglePanel.displayName = 'SinglePanel';\n\nexport default SinglePanel;\n"],"names":["SinglePanel","forwardRef","originalProps","ref","_useConfig","useConfig","classPrefix","globalDatePickerConfig","datePicker","panelName","props","useDefaultProps","mode","enableTimePicker","presetsPlacement","value","_props$firstDayOfWeek","firstDayOfWeek","style","className","year","month","onPanelClick","_getDefaultFormat","getDefaultFormat","format","disableDateOptions","useDisableDate","disableDate","tableData","useTableData","_objectSpread","start","parseToDayjs","toDate","panelContentProps","popupVisible","time","timePickerProps","onMonthChange","onYearChange","onJumperClick","onCellClick","onCellMouseEnter","onCellMouseLeave","onTimePickerChange","extraProps","presets","onPresetClick","onConfirmClick","selectedValue","React","createElement","classNames","_defineProperty","concat","includes","onClick","e","ExtraContent","PanelContent","displayName"],"mappings":"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"}