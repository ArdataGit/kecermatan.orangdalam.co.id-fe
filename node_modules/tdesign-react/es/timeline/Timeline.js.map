{"version":3,"file":"Timeline.js","sources":["../../src/timeline/Timeline.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React from 'react';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport TimelineItem from './TimelineItem';\nimport { TdTimelineProps } from './type';\nimport TimelineContext from './TimelineContext';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport { useAlign } from './useAlign';\n\nexport interface TimelineProps extends TdTimelineProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst Timeline = forwardRefWithStatics(\n  (props: TimelineProps, ref: React.Ref<HTMLUListElement>) => {\n    const {\n      theme = 'default',\n      labelAlign,\n      children,\n      className,\n      style,\n      reverse = false,\n      layout = 'vertical',\n      mode = 'alternate',\n    } = props;\n    const { classPrefix } = useConfig();\n    const renderAlign = useAlign(labelAlign, layout);\n\n    const timelineItems = React.Children.toArray(children).filter(\n      (child: JSX.Element) => child.type.displayName === TimelineItem.displayName,\n    );\n    // 获取所有子节点类型\n    const itemsStatus = React.Children.map(timelineItems, (child: JSX.Element) => child.props?.dotColor || 'primary');\n    const hasLabelItem = timelineItems.some((item: React.ReactElement<any>) => !!item?.props?.label);\n\n    if (reverse) {\n      timelineItems.reverse();\n    }\n\n    const itemsCounts = React.Children.count(timelineItems);\n\n    const timelineClassName = classNames(\n      `${classPrefix}-timeline`,\n      {\n        [`${classPrefix}-timeline-${renderAlign}`]: true,\n        [`${classPrefix}-timeline-reverse`]: reverse,\n        [`${classPrefix}-timeline-${layout}`]: true,\n        [`${classPrefix}-timeline-label`]: hasLabelItem,\n        [`${classPrefix}-timeline-label--${mode}`]: true,\n      },\n      className,\n    );\n\n    return (\n      <TimelineContext.Provider value={{ theme, reverse, itemsStatus, layout, globalAlign: labelAlign, mode }}>\n        <ul className={timelineClassName} style={style} ref={ref}>\n          {React.Children.map(timelineItems, (ele: JSX.Element, index) =>\n            React.cloneElement(ele, {\n              index,\n              className: classNames([ele?.props?.className], {\n                [`${classPrefix}-timeline-item--last`]: index === itemsCounts - 1,\n              }),\n            }),\n          )}\n        </ul>\n      </TimelineContext.Provider>\n    );\n  },\n  {\n    Item: TimelineItem,\n  },\n);\n\nTimeline.displayName = 'Timeline';\n\nexport default Timeline;\n"],"names":["Timeline","forwardRefWithStatics","props","ref","_props$theme","theme","labelAlign","children","className","style","_props$reverse","reverse","_props$layout","layout","_props$mode","mode","_useConfig","useConfig","classPrefix","renderAlign","useAlign","timelineItems","React","Children","toArray","filter","child","type","displayName","TimelineItem","itemsStatus","map","_child$props","dotColor","hasLabelItem","some","item","_item$props","label","itemsCounts","count","timelineClassName","classNames","concat","_defineProperty","createElement","TimelineContext","Provider","value","globalAlign","ele","index","_ele$props","cloneElement","Item"],"mappings":"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"}