{"version":3,"file":"useDrag.js","sources":["../../../src/drawer/hooks/useDrag.ts"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { TdDrawerProps } from '../type';\nimport { Styles } from '../../common';\n\nconst useDrag = (placement: TdDrawerProps['placement'], sizeDraggable: TdDrawerProps['sizeDraggable']) => {\n  const [dragSizeValue, changeDragSizeValue] = useState<string>(null);\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    if (sizeDraggable) {\n      if (placement === 'right') {\n        changeDragSizeValue(`${document.documentElement.clientWidth - x + 8}px`);\n      }\n      if (placement === 'left') {\n        changeDragSizeValue(`${x + 8}px`);\n      }\n      if (placement === 'top') {\n        changeDragSizeValue(`${y + 8}px`);\n      }\n      if (placement === 'bottom') {\n        changeDragSizeValue(`${document.documentElement.clientHeight - y + 8}px`);\n      }\n    }\n  };\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n  };\n  const draggableLineStyles: Styles = useMemo(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    };\n  }, [placement]);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n  };\n\n  return { dragSizeValue, enableDrag, draggableLineStyles };\n};\n\nexport default useDrag;\n"],"names":["useDrag","placement","sizeDraggable","_useState","useState","_useState2","_slicedToArray","dragSizeValue","changeDragSizeValue","handleMousemove","e","x","y","concat","document","documentElement","clientWidth","clientHeight","handleMouseup","removeEventListener","draggableLineStyles","useMemo","isHorizontal","includes","oppositeMap","left","right","top","bottom","_defineProperty","zIndex","position","background","enableDrag","addEventListener"],"mappings":"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"}