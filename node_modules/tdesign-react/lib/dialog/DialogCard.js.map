{"version":3,"file":"DialogCard.js","sources":["../../src/dialog/DialogCard.tsx"],"sourcesContent":["import React, { forwardRef, isValidElement } from 'react';\nimport classNames from 'classnames';\nimport isString from 'lodash/isString';\nimport isObject from 'lodash/isObject';\nimport isFunction from 'lodash/isFunction';\nimport {\n  CloseIcon as TdCloseIcon,\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n} from 'tdesign-icons-react';\nimport Button, { ButtonProps } from '../button';\nimport { TdDialogCardProps } from './type';\nimport { StyledProps } from '../common';\nimport parseTNode from '../_util/parseTNode';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { dialogCardDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface DialogCardProps extends TdDialogCardProps, StyledProps, React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\n\nconst renderDialogButton = (btn: DialogCardProps['cancelBtn'], defaultProps: ButtonProps) => {\n  let result = null;\n\n  if (isString(btn)) {\n    result = <Button {...defaultProps}>{btn}</Button>;\n  } else if (isValidElement(btn)) {\n    result = btn;\n  } else if (isObject(btn)) {\n    result = <Button {...defaultProps} {...(btn as {})} />;\n  } else if (isFunction(btn)) {\n    result = btn();\n  }\n\n  return result;\n};\n\nconst DialogCard = forwardRef<HTMLDivElement, DialogCardProps>((props, ref) => {\n  const { classPrefix } = useConfig();\n  const componentCls = `${classPrefix}-dialog`;\n  const { CloseIcon, InfoCircleFilledIcon, CheckCircleFilledIcon } = useGlobalIcon({\n    CloseIcon: TdCloseIcon,\n    InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n    CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n  });\n  const [local, t] = useLocaleReceiver('dialog');\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const {\n    theme,\n    header,\n    closeBtn,\n    footer,\n    body,\n    children,\n    className,\n    onCancel,\n    onConfirm,\n    onCloseBtnClick,\n    cancelBtn = cancelText,\n    confirmBtn = confirmText,\n    confirmLoading,\n    ...otherProps\n  } = useDefaultProps<DialogCardProps>(props, dialogCardDefaultProps);\n\n  const renderHeader = () => {\n    if (!header) {\n      return null;\n    }\n\n    const iconMap = {\n      info: <InfoCircleFilledIcon className={`${classPrefix}-is-info`} />,\n      warning: <InfoCircleFilledIcon className={`${classPrefix}-is-warning`} />,\n      // error is going to deprecated\n      error: <InfoCircleFilledIcon className={`${classPrefix}-is-error`} />,\n      danger: <InfoCircleFilledIcon className={`${classPrefix}-is-error`} />,\n      success: <CheckCircleFilledIcon className={`${classPrefix}-is-success`} />,\n    };\n\n    return (\n      <div className={`${componentCls}__header-content`}>\n        {iconMap[theme]}\n        {header}\n      </div>\n    );\n  };\n\n  const renderCloseBtn = () => {\n    if (!closeBtn) {\n      return null;\n    }\n\n    const closeIcon = () => (closeBtn === true ? <CloseIcon /> : closeBtn);\n\n    return (\n      <span\n        className={`${componentCls}__close`}\n        style={{\n          marginLeft: 'auto',\n        }}\n        onClick={(e: React.MouseEvent<HTMLDivElement>) => onCloseBtnClick?.({ e })}\n      >\n        {closeIcon()}\n      </span>\n    );\n  };\n\n  const renderFooter = () => {\n    if (footer === false || footer === null) {\n      return null;\n    }\n\n    const defaultFooter = () => {\n      const renderCancelBtn = renderDialogButton(cancelBtn, {\n        variant: 'outline',\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onCancel?.({ e }),\n      });\n      const renderConfirmBtn = renderDialogButton(confirmBtn, {\n        theme: 'primary',\n        loading: confirmLoading,\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onConfirm?.({ e }),\n      });\n\n      return (\n        <>\n          {renderCancelBtn}\n          {renderConfirmBtn}\n        </>\n      );\n    };\n\n    return <div className={`${componentCls}__footer`}>{parseTNode(footer, null, defaultFooter())}</div>;\n  };\n\n  return (\n    <div ref={ref} {...otherProps} className={classNames(componentCls, `${componentCls}--default`, className)}>\n      <div className={classNames(`${componentCls}__header`)}>\n        {renderHeader()}\n        {renderCloseBtn()}\n      </div>\n      <div className={`${componentCls}__body`}>{body || children}</div>\n      {renderFooter()}\n    </div>\n  );\n});\n\nDialogCard.displayName = 'DialogCard';\n\nexport default DialogCard;\n"],"names":["renderDialogButton","btn","defaultProps","result","isString","React","createElement","Button","_objectSpread","isValidElement","isObject","isFunction","DialogCard","forwardRef","props","ref","_useConfig","useConfig","classPrefix","componentCls","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","CheckCircleFilledIcon","TdCheckCircleFilledIcon","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","confirmText","confirm","cancelText","cancel","_useDefaultProps","useDefaultProps","dialogCardDefaultProps","theme","header","closeBtn","footer","body","children","className","onCancel","onConfirm","onCloseBtnClick","_useDefaultProps$canc","cancelBtn","_useDefaultProps$conf","confirmBtn","confirmLoading","otherProps","_objectWithoutProperties","_excluded","renderHeader","iconMap","info","warning","error","danger","success","renderCloseBtn","closeIcon","style","marginLeft","onClick","e","renderFooter","defaultFooter","renderCancelBtn","variant","renderConfirmBtn","loading","Fragment","parseTNode","classNames","concat","displayName"],"mappings":"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"}