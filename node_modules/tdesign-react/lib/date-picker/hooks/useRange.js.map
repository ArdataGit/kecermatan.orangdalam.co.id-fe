{"version":3,"file":"useRange.js","sources":["../../../src/date-picker/hooks/useRange.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CalendarIcon as TdCalendarIcon } from 'tdesign-icons-react';\nimport classNames from 'classnames';\nimport useConfig from '../../hooks/useConfig';\nimport useGlobalIcon from '../../hooks/useGlobalIcon';\nimport { RangeInputRefInterface } from '../../range-input';\nimport { TdDateRangePickerProps, DateValue } from '../type';\nimport { isValidDate, formatDate, getDefaultFormat, parseToDayjs } from '../../_common/js/date-picker/format';\nimport useRangeValue from './useRangeValue';\nimport type { TdPopupProps } from '../../popup/type';\n\nexport const PARTIAL_MAP = { first: 'start', second: 'end' };\n\nexport default function useRange(props: TdDateRangePickerProps) {\n  const { classPrefix, datePicker: globalDatePickerConfig } = useConfig();\n  const { CalendarIcon } = useGlobalIcon({ CalendarIcon: TdCalendarIcon });\n  const name = `${classPrefix}-date-range-picker`;\n\n  const isMountedRef = useRef(false);\n  const inputRef = useRef<RangeInputRefInterface>();\n\n  const {\n    value,\n    onChange,\n    time,\n    setTime,\n    month,\n    setMonth,\n    year,\n    setYear,\n    cacheValue,\n    setCacheValue,\n    isFirstValueSelected,\n    setIsFirstValueSelected,\n  } = useRangeValue(props);\n\n  const { format, timeFormat, valueType } = getDefaultFormat({\n    mode: props.mode,\n    format: props.format,\n    valueType: props.valueType,\n    enableTimePicker: props.enableTimePicker,\n  });\n\n  const [popupVisible, setPopupVisible] = useState(false);\n  const [isHoverCell, setIsHoverCell] = useState(false);\n  const [activeIndex, setActiveIndex] = useState(0); // 确定当前选中的输入框序号\n  // 未真正选中前可能不断变更输入框的内容\n  const [inputValue, setInputValue] = useState(formatDate(value, { format }));\n\n  // input 设置\n  const rangeInputProps = {\n    ...props.rangeInputProps,\n    ref: inputRef,\n    size: props.size,\n    separator: props.separator ?? globalDatePickerConfig.rangeSeparator,\n    clearable: props.clearable,\n    prefixIcon: props.prefixIcon,\n    readonly: !props.allowInput,\n    placeholder: props.placeholder ?? globalDatePickerConfig.placeholder[props.mode],\n    activeIndex: popupVisible ? activeIndex : undefined,\n    suffixIcon: props.suffixIcon ?? <CalendarIcon />,\n    className: classNames({\n      [`${name}__input--placeholder`]: isHoverCell,\n    }),\n    onClick: ({ position }) => {\n      setActiveIndex(position === 'first' ? 0 : 1);\n    },\n    onClear: ({ e }) => {\n      e.stopPropagation();\n      setPopupVisible(false);\n      onChange([], { dayjsValue: [], trigger: 'clear' });\n    },\n    onBlur: (newVal: string[], { e, position }) => {\n      props.onBlur?.({ value: newVal, partial: PARTIAL_MAP[position], e });\n    },\n    onFocus: (newVal: string[], { e, position }) => {\n      props.onFocus?.({ value: newVal, partial: PARTIAL_MAP[position], e });\n      setActiveIndex(position === 'first' ? 0 : 1);\n    },\n    onChange: (newVal: string[], { e, position }) => {\n      const index = position === 'first' ? 0 : 1;\n\n      props.onInput?.({ input: newVal[index], value, partial: PARTIAL_MAP[position], e });\n      setInputValue(newVal);\n\n      // 跳过不符合格式化的输入框内容\n      if (!isValidDate(newVal, format)) return;\n      setCacheValue(newVal);\n      const newYear = [];\n      const newMonth = [];\n      const newTime = [];\n      newVal.forEach((v) => {\n        newYear.push(parseToDayjs(v, format).year());\n        newMonth.push(parseToDayjs(v, format).month());\n        newTime.push(parseToDayjs(v, format).format(timeFormat));\n      });\n      setYear(newYear);\n      setMonth(newMonth);\n      setTime(newTime);\n    },\n    onEnter: (newVal: string[]) => {\n      if (!isValidDate(newVal, format) && !isValidDate(value, format)) return;\n\n      setPopupVisible(false);\n      if (isValidDate(newVal, format)) {\n        onChange(formatDate(newVal, { format, targetFormat: valueType, autoSwap: true }) as DateValue[], {\n          dayjsValue: newVal.map((v) => parseToDayjs(v, format)),\n          trigger: 'enter',\n        });\n      } else if (isValidDate(value, format)) {\n        setInputValue(formatDate(value, { format }));\n      } else {\n        setInputValue([]);\n      }\n    },\n  };\n\n  // popup 设置\n  const popupProps = {\n    expandAnimation: true,\n    ...props.popupProps,\n    trigger: 'mousedown' as TdPopupProps['trigger'],\n    overlayInnerStyle: props.popupProps?.overlayInnerStyle ?? { width: 'auto' },\n    overlayClassName: classNames(props.popupProps?.overlayClassName, `${name}__panel-container`),\n    onVisibleChange: (visible: boolean, context) => {\n      if (props.disabled) return;\n      // 这里劫持了进一步向 popup 传递的 onVisibleChange 事件，为了保证可以在 Datepicker 中使用 popupProps.onVisibleChange，故此处理\n      props.popupProps?.onVisibleChange?.(visible, context);\n      // 输入框点击不关闭面板\n      if (context.trigger === 'trigger-element-mousedown') {\n        const indexMap = { 0: 'first', 1: 'second' };\n        inputRef.current.focus({ position: indexMap[activeIndex] });\n        return setPopupVisible(true);\n      }\n\n      setPopupVisible(visible);\n    },\n  };\n\n  // 输入框响应 value 变化\n  useEffect(() => {\n    if (!value) {\n      setInputValue([]);\n      return;\n    }\n    if (!isValidDate(value, format)) return;\n\n    setInputValue(formatDate(value, { format }));\n    // eslint-disable-next-line\n  }, [value]);\n\n  // activeIndex 变化自动 focus 对应输入框\n  useEffect(() => {\n    if (!popupVisible) return;\n    if (!isMountedRef.current) {\n      isMountedRef.current = true;\n      return;\n    }\n    const indexMap = { 0: 'first', 1: 'second' };\n    inputRef.current.focus({ position: indexMap[activeIndex] });\n    // eslint-disable-next-line\n  }, [activeIndex]);\n\n  return {\n    year,\n    month,\n    value,\n    time,\n    inputValue,\n    popupVisible,\n    rangeInputProps,\n    popupProps,\n    isHoverCell,\n    onChange,\n    setYear,\n    setMonth,\n    setTime,\n    setIsHoverCell,\n    setInputValue,\n    setPopupVisible,\n    activeIndex,\n    setActiveIndex,\n    isFirstValueSelected,\n    setIsFirstValueSelected,\n    cacheValue,\n    setCacheValue,\n  };\n}\n"],"names":["PARTIAL_MAP","first","second","useRange","props","_props$separator","_props$placeholder","_props$suffixIcon","_props$popupProps$ove","_props$popupProps","_props$popupProps2","_useConfig","useConfig","classPrefix","globalDatePickerConfig","datePicker","_useGlobalIcon","useGlobalIcon","CalendarIcon","TdCalendarIcon","name","isMountedRef","useRef","inputRef","_useRangeValue","useRangeValue","value","onChange","time","setTime","month","setMonth","year","setYear","cacheValue","setCacheValue","isFirstValueSelected","setIsFirstValueSelected","_getDefaultFormat","getDefaultFormat","mode","format","valueType","enableTimePicker","timeFormat","_useState","useState","_useState2","_slicedToArray","popupVisible","setPopupVisible","_useState3","_useState4","isHoverCell","setIsHoverCell","_useState5","_useState6","activeIndex","setActiveIndex","_useState7","formatDate","_useState8","inputValue","setInputValue","rangeInputProps","_objectSpread","ref","size","separator","rangeSeparator","clearable","prefixIcon","readonly","allowInput","placeholder","suffixIcon","React","createElement","className","classNames","_defineProperty","concat","onClick","_ref","position","onClear","_ref2","e","stopPropagation","dayjsValue","trigger","onBlur","newVal","_ref3","_props$onBlur","call","partial","onFocus","_ref4","_props$onFocus","_ref5","_props$onInput","index","onInput","input","isValidDate","newYear","newMonth","newTime","forEach","v","push","parseToDayjs","onEnter","targetFormat","autoSwap","map","popupProps","expandAnimation","overlayInnerStyle","width","overlayClassName","onVisibleChange","visible","context","_props$popupProps3","_props$popupProps3$on","disabled","indexMap","current","focus","useEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWO,IAAMA,WAAc,GAAA;AAAEC,EAAAA,KAAO,EAAA,OAAA;AAASC,EAAAA,QAAQ,KAAA;AAAM,EAAA;AAE3D,SAAwBC,SAASC,KAA+B,EAAA;EAAA,IAAAC,gBAAA,EAAAC,kBAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,iBAAA,EAAAC,kBAAA,CAAA;AAC9D,EAAA,IAAAC,UAAA,GAA4DC,SAAU,EAAA;IAA9DC,WAAA,GAAAF,UAAA,CAAAE,WAAA;IAAyBC,sBAAA,GAAAH,UAAA,CAAZI,UAAY,CAAA;EACjC,IAAAC,cAAA,GAAyBC,cAAc;AAAEC,MAAAA,YAAA,EAAcC,YAAAA;AAAe,KAAC,CAAA;IAA/DD,cAAa,GAAAF,cAAA,CAAbE,YAAa,CAAA;AACrB,EAAA,IAAME,iBAAUP,WAAA,EAAA,oBAAA,CAAA,CAAA;AAEV,EAAA,IAAAQ,YAAA,GAAeC,OAAO,KAAK,CAAA,CAAA;AACjC,EAAA,IAAMC,WAAWD,MAA+B,EAAA,CAAA;AAE1C,EAAA,IAAAE,cAAA,GAaFC,WAAcrB,KAAK,CAAA;IAZrBsB,KAAA,GAAAF,cAAA,CAAAE,KAAA;IACAC,QAAA,GAAAH,cAAA,CAAAG,QAAA;IACAC,IAAA,GAAAJ,cAAA,CAAAI,IAAA;IACAC,OAAA,GAAAL,cAAA,CAAAK,OAAA;IACAC,KAAA,GAAAN,cAAA,CAAAM,KAAA;IACAC,QAAA,GAAAP,cAAA,CAAAO,QAAA;IACAC,IAAA,GAAAR,cAAA,CAAAQ,IAAA;IACAC,OAAA,GAAAT,cAAA,CAAAS,OAAA;IACAC,UAAA,GAAAV,cAAA,CAAAU,UAAA;IACAC,aAAA,GAAAX,cAAA,CAAAW,aAAA;IACAC,oBAAA,GAAAZ,cAAA,CAAAY,oBAAA;IACAC,uBAAA,GAAAb,cAAA,CAAAa,uBAAA,CAAA;EAGF,IAAAC,iBAAA,GAA0CC,gBAAiB,CAAA;MACzDC,MAAMpC,KAAM,CAAAoC,IAAA;MACZC,QAAQrC,KAAM,CAAAqC,MAAA;MACdC,WAAWtC,KAAM,CAAAsC,SAAA;MACjBC,kBAAkBvC,KAAM,CAAAuC,gBAAAA;AAC1B,KAAC,CAAA;IALOF,MAAA,GAAAH,iBAAA,CAAAG,MAAA;IAAQG,UAAY,GAAAN,iBAAA,CAAZM,UAAY;IAAAF,SAAA,GAAAJ,iBAAA,CAAAI,SAAA,CAAA;AAO5B,EAAA,IAAAG,SAAA,GAAwCC,SAAS,KAAK,CAAA;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA/CI,IAAAA,YAAA,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAcG,IAAAA,eAAe,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AACpC,EAAA,IAAAI,UAAA,GAAsCL,SAAS,KAAK,CAAA;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA,EAAA,CAAA,CAAA;AAA7CE,IAAAA,WAAA,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAaE,IAAAA,cAAc,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAClC,EAAA,IAAAG,UAAA,GAAsCT,SAAS,CAAC,CAAA;IAAAU,UAAA,GAAAR,cAAA,CAAAO,UAAA,EAAA,CAAA,CAAA;AAAzCE,IAAAA,WAAA,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAaE,IAAAA,cAAc,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAE5B,EAAA,IAAAG,UAAA,GAA8Bb,QAAA,CAASc,WAAWlC,KAAO,EAAA;AAAEe,MAAAA,MAAO,EAAPA,MAAAA;AAAO,KAAC,CAAC,CAAA;IAAAoB,UAAA,GAAAb,cAAA,CAAAW,UAAA,EAAA,CAAA,CAAA;AAAnEG,IAAAA,UAAY,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAAE,IAAAA,aAAa,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;EAGhC,IAAMG,eAAkB,GAAAC,aAAA,CAAAA,aAAA,CACnB7D,EAAAA,EAAAA,KAAM,CAAA4D,eAAA,CAAA,EAAA,EAAA,EAAA;AACTE,IAAAA,GAAK,EAAA3C,QAAA;IACL4C,MAAM/D,KAAM,CAAA+D,IAAA;AACZC,IAAAA,SAAA,EAAA/D,CAAAA,gBAAA,GAAWD,KAAM,CAAAgE,SAAA,MAAA/D,IAAAA,IAAAA,gBAAA,KAAAA,KAAAA,CAAAA,GAAAA,gBAAA,GAAaS,sBAAuB,CAAAuD,cAAA;IACrDC,WAAWlE,KAAM,CAAAkE,SAAA;IACjBC,YAAYnE,KAAM,CAAAmE,UAAA;AAClBC,IAAAA,QAAA,EAAU,CAACpE,KAAM,CAAAqE,UAAA;AACjBC,IAAAA,WAAa,GAAApE,kBAAA,GAAAF,KAAA,CAAMsE,WAAe,cAAApE,kBAAA,KAAA,KAAA,CAAA,GAAAA,kBAAA,GAAAQ,sBAAA,CAAuB4D,YAAYtE,KAAM,CAAAoC,IAAA,CAAA;AAC3EiB,IAAAA,WAAA,EAAaR,eAAeQ,WAAc,GAAA,KAAA,CAAA;AAC1CkB,IAAAA,UAAY,GAAApE,iBAAA,GAAAH,KAAA,CAAMuE,UAAc,cAAApE,iBAAA,KAAA,KAAA,CAAA,GAAAA,iBAAA,kBAAAqE,KAAA,CAAAC,aAAA,CAAC3D,cAAa,EAAA,IAAA,CAAA;IAC9C4D,WAAWC,UAAW,CAAAC,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAC,MAAA,CAChB7D,IAA6B,EAAA,sBAAA,CAAA,EAAAiC,WAAA,CAClC,CAAA;AACD6B,IAAAA,OAAS,EAAA,SAAAA,OAAAC,CAAAA,IAAA,EAAkB;AAAA,MAAA,IAAfC,QAAA,GAAAD,IAAA,CAAAC,QAAA,CAAA;MACK1B,cAAA,CAAA0B,QAAA,KAAa,OAAU,GAAA,CAAA,GAAI,CAAC,CAAA,CAAA;KAC7C;AACAC,IAAAA,OAAS,EAAA,SAAAA,OAAAC,CAAAA,KAAA,EAAW;AAAA,MAAA,IAARC,CAAA,GAAAD,KAAA,CAAAC,CAAA,CAAA;MACVA,CAAA,CAAEC,eAAgB,EAAA,CAAA;MAClBtC,eAAA,CAAgB,KAAK,CAAA,CAAA;MACZvB,QAAA,CAAA,IAAI;AAAE8D,QAAAA,UAAA,EAAY,EAAI;AAAAC,QAAAA,OAAA,EAAS,OAAA;AAAQ,OAAC,CAAA,CAAA;KACnD;AACAC,IAAAA,QAAQ,SAAAA,MAAAA,CAACC,MAAA,EAAAC,KAAA,EAAsC;AAAA,MAAA,IAAAC,aAAA,CAAA;AAAA,MAAA,IAAlBP,CAAA,GAAAM,KAAA,CAAAN,CAAA;QAAGH,iBAAAA;AACxB,MAAA,CAAAU,aAAA,GAAA1F,KAAA,CAAAuF,MAAA,MAAA,IAAA,IAAAG,aAAA,KAAA,KAAA,CAAA,IAAAA,aAAA,CAAAC,IAAA,CAAA3F,KAAA,EAAS;AAAEsB,QAAAA,KAAO,EAAAkE,MAAA;AAAQI,QAAAA,SAAShG,WAAY,CAAAoF,QAAA,CAAA;AAAWG,QAAAA,GAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACrE;AACAU,IAAAA,SAAS,SAAAA,OAAAA,CAACL,MAAA,EAAAM,KAAA,EAAsC;AAAA,MAAA,IAAAC,cAAA,CAAA;AAAA,MAAA,IAAlBZ,CAAA,GAAAW,KAAA,CAAAX,CAAA;QAAGH,iBAAAA;AACzB,MAAA,CAAAe,cAAA,GAAA/F,KAAA,CAAA6F,OAAA,MAAA,IAAA,IAAAE,cAAA,KAAA,KAAA,CAAA,IAAAA,cAAA,CAAAJ,IAAA,CAAA3F,KAAA,EAAU;AAAEsB,QAAAA,KAAO,EAAAkE,MAAA;AAAQI,QAAAA,SAAShG,WAAY,CAAAoF,QAAA,CAAA;AAAWG,QAAAA,GAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;MACrD7B,cAAA,CAAA0B,QAAA,KAAa,OAAU,GAAA,CAAA,GAAI,CAAC,CAAA,CAAA;KAC7C;AACAzD,IAAAA,UAAU,SAAAA,QAAAA,CAACiE,MAAA,EAAAQ,KAAA,EAAsC;AAAA,MAAA,IAAAC,cAAA,CAAA;AAAA,MAAA,IAAlBd,CAAA,GAAAa,KAAA,CAAAb,CAAA;QAAGH,iBAAAA;MAC1B,IAAAkB,KAAA,GAAQlB,QAAa,KAAA,OAAA,GAAU,CAAI,GAAA,CAAA,CAAA;AAEnC,MAAA,CAAAiB,cAAA,GAAAjG,KAAA,CAAAmG,OAAA,MAAA,IAAA,IAAAF,cAAA,KAAA,KAAA,CAAA,IAAAA,cAAA,CAAAN,IAAA,CAAA3F,KAAA,EAAU;AAAEoG,QAAAA,KAAA,EAAOZ,MAAO,CAAAU,KAAA,CAAA;AAAQ5E,QAAAA,OAAAA;AAAOsE,QAAAA,OAAS,EAAAhG,WAAA,CAAYoF,QAAW,CAAA;AAAAG,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;MAClFxB,aAAA,CAAc6B,MAAM,CAAA,CAAA;AAGhB,MAAA,IAAA,CAACa,WAAY,CAAAb,MAAA,EAAQnD,MAAM,CAAA,EAAG,OAAA;MAClCN,aAAA,CAAcyD,MAAM,CAAA,CAAA;MACpB,IAAMc,UAAU,EAAC,CAAA;MACjB,IAAMC,WAAW,EAAC,CAAA;MAClB,IAAMC,UAAU,EAAC,CAAA;AACVhB,MAAAA,MAAA,CAAAiB,OAAA,CAAQ,UAACC,CAAM,EAAA;AACpBJ,QAAAA,OAAA,CAAQK,KAAKC,YAAa,CAAAF,CAAA,EAAGrE,MAAM,CAAA,CAAET,MAAM,CAAA,CAAA;AAC3C2E,QAAAA,QAAA,CAASI,KAAKC,YAAa,CAAAF,CAAA,EAAGrE,MAAM,CAAA,CAAEX,OAAO,CAAA,CAAA;AAC7C8E,QAAAA,OAAA,CAAQG,KAAKC,YAAa,CAAAF,CAAA,EAAGrE,MAAM,CAAE,CAAAA,MAAA,CAAOG,UAAU,CAAC,CAAA,CAAA;AACzD,OAAC,CAAA,CAAA;MACDX,OAAA,CAAQyE,OAAO,CAAA,CAAA;MACf3E,QAAA,CAAS4E,QAAQ,CAAA,CAAA;MACjB9E,OAAA,CAAQ+E,OAAO,CAAA,CAAA;KACjB;AACAK,IAAAA,OAAA,EAAS,SAAAA,OAACrB,CAAAA,MAAqB,EAAA;AACzB,MAAA,IAAA,CAACa,YAAYb,MAAQ,EAAAnD,MAAM,KAAK,CAACgE,WAAA,CAAY/E,OAAOe,MAAM,CAAA,EAAG,OAAA;MAEjES,eAAA,CAAgB,KAAK,CAAA,CAAA;AACjB,MAAA,IAAAuD,WAAA,CAAYb,MAAQ,EAAAnD,MAAM,CAAG,EAAA;AACtBd,QAAAA,QAAA,CAAAiC,UAAA,CAAWgC,QAAQ;AAAEnD,UAAAA,MAAA,EAAAA,MAAA;AAAQyE,UAAAA,cAAcxE,SAAW;AAAAyE,UAAAA,QAAA,EAAU,IAAA;AAAK,SAAC,CAAkB,EAAA;AAC/F1B,UAAAA,UAAA,EAAYG,OAAOwB,GAAI,CAAA,UAACN;mBAAME,YAAa,CAAAF,CAAA,EAAGrE,MAAM,CAAC,CAAA;WAAA,CAAA;AACrDiD,UAAAA,OAAS,EAAA,OAAA;AACX,SAAC,CAAA,CAAA;OACQ,MAAA,IAAAe,WAAA,CAAY/E,KAAO,EAAAe,MAAM,CAAG,EAAA;AACrCsB,QAAAA,aAAA,CAAcH,UAAW,CAAAlC,KAAA,EAAO;AAAEe,UAAAA,MAAA,EAAAA,MAAAA;AAAO,SAAC,CAAC,CAAA,CAAA;AAC7C,OAAO,MAAA;QACLsB,aAAA,CAAc,EAAE,CAAA,CAAA;AAClB,OAAA;AACF,KAAA;GACF,CAAA,CAAA;AAGA,EAAA,IAAMsD,UAAa,GAAApD,aAAA,CAAAA,aAAA,CAAA;AACjBqD,IAAAA,eAAiB,EAAA,IAAA;GACdlH,EAAAA,KAAM,CAAAiH,UAAA,CAAA,EAAA,EAAA,EAAA;AACT3B,IAAAA,OAAS,EAAA,WAAA;AACT6B,IAAAA,iEAAmBnH,KAAM,CAAAiH,UAAA,MAAA,IAAA,IAAA5G,iBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAANA,iBAAA,CAAkB8G,iBAAqB,cAAA/G,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAA;AAAEgH,MAAAA,OAAO,MAAA;KAAO;AAC1EC,IAAAA,kBAAkB1C,UAAW,CAAA,CAAArE,kBAAA,GAAAN,KAAA,CAAMiH,UAAY,MAAA,IAAA,IAAA3G,kBAAA,KAAlBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,kBAAA,CAAkB+G,gBAAA,EAAA,EAAA,CAAAxC,MAAA,CAAqB7D,IAAuB,sBAAA,CAAA;AAC3FsG,IAAAA,eAAA,EAAiB,SAAAA,eAAAA,CAACC,OAAA,EAAkBC,OAAY,EAAA;MAAA,IAAAC,kBAAA,EAAAC,qBAAA,CAAA;MAC9C,IAAI1H,KAAM,CAAA2H,QAAA,EAAU,OAAA;MAEd,CAAAF,kBAAA,GAAAzH,KAAA,CAAAiH,UAAA,cAAAQ,kBAAA,KAAA,KAAA,CAAA,IAAA,CAAAC,qBAAA,GAAAD,kBAAA,CAAYH,eAAkB,MAAAI,IAAAA,IAAAA,qBAAA,KAA9BA,KAAAA,CAAAA,IAAAA,qBAAA,CAAA/B,IAAA,CAAA8B,kBAAA,EAA8BF,OAAA,EAASC,OAAO,CAAA,CAAA;AAEhD,MAAA,IAAAA,OAAA,CAAQlC,YAAY,2BAA6B,EAAA;AACnD,QAAA,IAAMsC,QAAW,GAAA;AAAE,UAAA,CAAG,EAAA,OAAA;AAAS,UAAA,GAAG,QAAA;SAAS,CAAA;AAC3CzG,QAAAA,QAAA,CAAS0G,QAAQC,KAAM,CAAA;UAAE9C,QAAU,EAAA4C,QAAA,CAASvE;AAAa,SAAC,CAAA,CAAA;QAC1D,OAAOP,gBAAgB,IAAI,CAAA,CAAA;AAC7B,OAAA;MAEAA,eAAA,CAAgByE,OAAO,CAAA,CAAA;AACzB,KAAA;GACF,CAAA,CAAA;AAGAQ,EAAAA,SAAA,CAAU,YAAM;IACd,IAAI,CAACzG,KAAO,EAAA;MACVqC,aAAA,CAAc,EAAE,CAAA,CAAA;AAChB,MAAA,OAAA;AACF,KAAA;AACI,IAAA,IAAA,CAAC0C,WAAY,CAAA/E,KAAA,EAAOe,MAAM,CAAA,EAAG,OAAA;AAEjCsB,IAAAA,aAAA,CAAcH,UAAW,CAAAlC,KAAA,EAAO;AAAEe,MAAAA,MAAA,EAAAA,MAAAA;AAAO,KAAC,CAAC,CAAA,CAAA;AAE7C,GAAA,EAAG,CAACf,KAAK,CAAC,CAAA,CAAA;AAGVyG,EAAAA,SAAA,CAAU,YAAM;IACd,IAAI,CAAClF,YAAA,EAAc,OAAA;AACf,IAAA,IAAA,CAAC5B,aAAa4G,OAAS,EAAA;MACzB5G,YAAA,CAAa4G,OAAU,GAAA,IAAA,CAAA;AACvB,MAAA,OAAA;AACF,KAAA;AACA,IAAA,IAAMD,QAAW,GAAA;AAAE,MAAA,CAAG,EAAA,OAAA;AAAS,MAAA,GAAG,QAAA;KAAS,CAAA;AAC3CzG,IAAAA,QAAA,CAAS0G,QAAQC,KAAM,CAAA;MAAE9C,QAAU,EAAA4C,QAAA,CAASvE;AAAa,KAAC,CAAA,CAAA;AAE5D,GAAA,EAAG,CAACA,WAAW,CAAC,CAAA,CAAA;EAET,OAAA;AACLzB,IAAAA,IAAA,EAAAA,IAAA;AACAF,IAAAA,KAAA,EAAAA,KAAA;AACAJ,IAAAA,KAAA,EAAAA,KAAA;AACAE,IAAAA,IAAA,EAAAA,IAAA;AACAkC,IAAAA,UAAA,EAAAA,UAAA;AACAb,IAAAA,YAAA,EAAAA,YAAA;AACAe,IAAAA,eAAA,EAAAA,eAAA;AACAqD,IAAAA,UAAA,EAAAA,UAAA;AACAhE,IAAAA,WAAA,EAAAA,WAAA;AACA1B,IAAAA,QAAA,EAAAA,QAAA;AACAM,IAAAA,OAAA,EAAAA,OAAA;AACAF,IAAAA,QAAA,EAAAA,QAAA;AACAF,IAAAA,OAAA,EAAAA,OAAA;AACAyB,IAAAA,cAAA,EAAAA,cAAA;AACAS,IAAAA,aAAA,EAAAA,aAAA;AACAb,IAAAA,eAAA,EAAAA,eAAA;AACAO,IAAAA,WAAA,EAAAA,WAAA;AACAC,IAAAA,cAAA,EAAAA,cAAA;AACAtB,IAAAA,oBAAA,EAAAA,oBAAA;AACAC,IAAAA,uBAAA,EAAAA,uBAAA;AACAH,IAAAA,UAAA,EAAAA,UAAA;AACAC,IAAAA,aAAA,EAAAA,aAAAA;GACF,CAAA;AACF;;;;"}