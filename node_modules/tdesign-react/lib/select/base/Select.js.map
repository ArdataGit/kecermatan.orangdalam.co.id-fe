{"version":3,"file":"Select.js","sources":["../../../src/select/base/Select.tsx"],"sourcesContent":["import React, {\n  useEffect,\n  useMemo,\n  KeyboardEvent,\n  WheelEvent,\n  useRef,\n  useCallback,\n  Children,\n  cloneElement,\n  isValidElement,\n  useState,\n} from 'react';\nimport classNames from 'classnames';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport debounce from 'lodash/debounce';\nimport useControlled from '../../hooks/useControlled';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport forwardRefWithStatics from '../../_util/forwardRefWithStatics';\nimport { getSelectValueArr, getSelectedOptions } from '../util/helper';\nimport noop from '../../_util/noop';\nimport FakeArrow from '../../common/FakeArrow';\nimport Loading from '../../loading';\nimport SelectInput, { SelectInputValue, SelectInputValueChangeContext } from '../../select-input';\nimport Option from './Option';\nimport OptionGroup from './OptionGroup';\nimport PopupContent from './PopupContent';\nimport Tag from '../../tag';\nimport { TdSelectProps, TdOptionProps, SelectOption, SelectValueChangeTrigger } from '../type';\nimport { StyledProps } from '../../common';\nimport { selectDefaultProps } from '../defaultProps';\nimport { PopupVisibleChangeContext } from '../../popup';\nimport useOptions from '../hooks/useOptions';\nimport composeRefs from '../../_util/composeRefs';\nimport { parseContentTNode } from '../../_util/parseTNode';\nimport useDefaultProps from '../../hooks/useDefaultProps';\n\nexport interface SelectProps<T = SelectOption> extends TdSelectProps<T>, StyledProps {\n  // 子节点\n  children?: React.ReactNode;\n  onMouseEnter?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\ntype OptionsType = TdOptionProps[];\n\nconst Select = forwardRefWithStatics(\n  (originalProps: SelectProps, ref: React.Ref<HTMLDivElement>) => {\n    const props = useDefaultProps<SelectProps>(originalProps, selectDefaultProps);\n    // 国际化文本初始化\n    const [local, t] = useLocaleReceiver('select');\n    const emptyText = t(local.loadingText);\n\n    const {\n      readonly,\n      borderless,\n      autoWidth,\n      creatable,\n      filter,\n      loadingText = emptyText,\n      max,\n      popupProps,\n      reserveKeyword,\n      className,\n      style,\n      disabled,\n      size,\n      multiple,\n      placeholder,\n      clearable,\n      prefixIcon,\n      options,\n      filterable,\n      loading,\n      onFocus,\n      onBlur,\n      onClear = noop,\n      onCreate,\n      onRemove,\n      onSearch,\n      empty,\n      valueType,\n      keys,\n      children,\n      collapsedItems,\n      minCollapsedNum,\n      valueDisplay,\n      onEnter,\n      showArrow,\n      inputProps,\n      panelBottomContent,\n      panelTopContent,\n      selectInputProps,\n      tagInputProps,\n      tagProps,\n      scroll,\n      suffixIcon,\n      onPopupVisibleChange,\n    } = props;\n\n    const [value, onChange] = useControlled(props, 'value', props.onChange);\n    const selectInputRef = useRef(null);\n    const { classPrefix } = useConfig();\n    const { overlayClassName, onScroll, onScrollToBottom, ...restPopupProps } = popupProps || {};\n    const [isScrolling, toggleIsScrolling] = useState(false);\n\n    const name = `${classPrefix}-select`; // t-select\n\n    const [showPopup, setShowPopup] = useControlled(props, 'popupVisible', onPopupVisibleChange);\n    const [inputValue, onInputChange] = useControlled(props, 'inputValue', props.onInputChange);\n\n    const { currentOptions, setCurrentOptions, tmpPropOptions, valueToOption, selectedOptions } = useOptions(\n      keys,\n      options,\n      children,\n      valueType,\n      value,\n      reserveKeyword,\n    );\n\n    const selectedLabel = useMemo(() => {\n      if (multiple) {\n        return selectedOptions.map((selectedOption) => get(selectedOption || {}, keys?.label || 'label') || '');\n      }\n      return get(selectedOptions[0] || {}, keys?.label || 'label') || undefined;\n    }, [selectedOptions, keys, multiple]);\n\n    const handleShowPopup = (visible: boolean, ctx: PopupVisibleChangeContext) => {\n      if (disabled) return;\n      visible && toggleIsScrolling(false);\n      !visible && onInputChange('', { trigger: 'blur' });\n      setShowPopup(visible, ctx);\n    };\n\n    // 可以根据触发来源，自由定制标签变化时的筛选器行为\n    const onTagChange = (_currentTags: SelectInputValue, context) => {\n      const { trigger, index, item, e } = context;\n      // backspace\n      if (trigger === 'backspace') {\n        e.stopPropagation();\n\n        let closest = -1;\n        let len = index;\n        while (len >= 0) {\n          if (!selectedOptions[len]?.disabled) {\n            closest = len;\n            break;\n          }\n          len -= 1;\n        }\n        if (closest < 0) {\n          return;\n        }\n        const values = getSelectValueArr(value, value[closest], true, valueType, keys);\n\n        // 处理onChange回调中的selectedOptions参数\n        const currentSelectedOptions = getSelectedOptions(values, multiple, valueType, keys, tmpPropOptions);\n        onChange(values, { e, trigger, selectedOptions: currentSelectedOptions });\n        return;\n      }\n\n      if (trigger === 'clear') {\n        e.stopPropagation();\n        onChange([], { e, trigger, selectedOptions: [] });\n        return;\n      }\n\n      if (trigger === 'tag-remove') {\n        e.stopPropagation();\n        const values = getSelectValueArr(value, value[index], true, valueType, keys);\n        // 处理onChange回调中的selectedOptions参数\n        const currentSelectedOptions = getSelectedOptions(values, multiple, valueType, keys, tmpPropOptions);\n\n        onChange(values, { e, trigger, selectedOptions: currentSelectedOptions });\n        if (isFunction(onRemove)) {\n          onRemove({\n            value: value[index],\n            data: {\n              label: item,\n              value: value[index],\n            },\n            e,\n          });\n        }\n      }\n    };\n    const onCheckAllChange = (checkAll: boolean, e: React.MouseEvent<HTMLLIElement>) => {\n      if (!multiple) {\n        return;\n      }\n      const selectableOptions = currentOptions\n        .filter((option) => !option.checkAll && !option.disabled)\n        .map((option) => option.value);\n\n      const checkAllValue =\n        !checkAll && selectableOptions.length !== (props.value as Array<SelectOption>)?.length ? selectableOptions : [];\n      onChange?.(checkAllValue, { e, trigger: checkAll ? 'check' : 'uncheck', selectedOptions: checkAllValue });\n    };\n\n    // 选中 Popup 某项\n    const handleChange = (\n      value: string | number | Array<string | number | Record<string, string | number>>,\n      context: { e: React.MouseEvent<HTMLLIElement>; trigger: SelectValueChangeTrigger },\n    ) => {\n      if (multiple) {\n        !reserveKeyword && inputValue && onInputChange('', { e: context.e, trigger: 'change' });\n      }\n      if (creatable && isFunction(onCreate)) {\n        if ((options as OptionsType).filter((option) => option.value === value).length === 0) {\n          onCreate(value as string); // 手动输入 此时为string\n        }\n      }\n      // 处理onChange回调中的selectedOptions参数\n      const currentSelectedOptions = getSelectedOptions(value, multiple, valueType, keys, tmpPropOptions);\n\n      onChange?.(value, { ...context, selectedOptions: currentSelectedOptions });\n    };\n\n    // 处理filter逻辑\n    const handleFilter = (value: string) => {\n      let filteredOptions: OptionsType = [];\n      if (filterable && isFunction(onSearch)) {\n        return;\n      }\n      if (!value) {\n        setCurrentOptions(tmpPropOptions);\n        return;\n      }\n\n      if (filter && isFunction(filter)) {\n        // 如果有自定义的filter方法 使用自定义的filter方法\n        if (Array.isArray(tmpPropOptions)) {\n          filteredOptions = tmpPropOptions.filter((option) => filter(value, option));\n        } else if (Array.isArray(Object.values(valueToOption))) {\n          filteredOptions = Object.values(valueToOption).filter((option) => filter(value, option));\n        }\n      } else if (Array.isArray(tmpPropOptions)) {\n        const upperValue = value.toUpperCase();\n        filteredOptions = tmpPropOptions.filter((option) => (option?.label || '').toUpperCase().includes(upperValue)); // 不区分大小写\n      }\n      const isSameLabelOptionExist = filteredOptions.find((option) => option.label === value);\n      if (creatable && !isSameLabelOptionExist) {\n        filteredOptions = filteredOptions.concat([{ label: value, value }]);\n      }\n      setCurrentOptions(filteredOptions);\n    };\n\n    // 处理输入框逻辑\n    const handleInputChange = (value: string, context: SelectInputValueChangeContext) => {\n      if (context.trigger !== 'clear') {\n        onInputChange(value, { e: context.e, trigger: 'input' });\n      }\n      if (value === undefined) {\n        return;\n      }\n      if (isFunction(onSearch)) {\n        onSearch(value, { e: context.e as KeyboardEvent<HTMLDivElement> });\n        return;\n      }\n    };\n\n    const onClearValue = (context) => {\n      context.e.stopPropagation();\n      if (Array.isArray(value)) {\n        onChange([], { ...context, selectedOptions: [] });\n      } else {\n        onChange(null, { ...context, selectedOptions: [] });\n      }\n      onClear(context);\n    };\n\n    useEffect(() => {\n      if (typeof inputValue !== 'undefined') {\n        handleFilter(String(inputValue));\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [inputValue, tmpPropOptions]);\n\n    // 渲染后置图标\n    const renderSuffixIcon = () => {\n      if (suffixIcon) {\n        return suffixIcon;\n      }\n      if (loading) {\n        return (\n          <Loading className={classNames(`${name}__right-icon`, `${name}__active-icon`)} loading={true} size=\"small\" />\n        );\n      }\n\n      return showArrow && <FakeArrow className={`${name}__right-icon`} isActive={showPopup} disabled={disabled} />;\n    };\n    const getPopupInstance = useCallback(() => (selectInputRef as any).current?.getPopupContentElement(), []);\n\n    const childrenWithProps = Children.map(children, (child) => {\n      if (isValidElement(child)) {\n        const addedProps = { multiple };\n        return cloneElement(child, { ...addedProps });\n      }\n      return child;\n    });\n    // 渲染主体内容\n    const renderContent = () => {\n      const popupContentProps = {\n        onChange: handleChange,\n        value,\n        className,\n        size,\n        multiple,\n        showPopup,\n        // popup弹出层内容只会在点击事件之后触发 并且无任何透传参数\n        setShowPopup: (show: boolean) => handleShowPopup(show, {}),\n        options: currentOptions,\n        empty,\n        max,\n        loadingText,\n        loading,\n        valueType,\n        keys,\n        panelBottomContent,\n        panelTopContent,\n        onCheckAllChange,\n        getPopupInstance,\n        scroll,\n      };\n      return <PopupContent {...popupContentProps}>{childrenWithProps}</PopupContent>;\n    };\n\n    const renderValueDisplay = () => {\n      if (!valueDisplay) {\n        if (!multiple) {\n          if (typeof selectedLabel !== 'string') {\n            return selectedLabel;\n          }\n          return '';\n        }\n        return ({ value: val }) =>\n          val.slice(0, minCollapsedNum ? minCollapsedNum : val.length).map((v: string, key: number) => {\n            const filterOption: SelectOption & { disabled?: boolean } = options?.find((option) => option.label === v);\n            return (\n              <Tag\n                key={key}\n                closable={!filterOption?.disabled && !disabled && !readonly}\n                size={size}\n                {...tagProps}\n                onClose={({ e }) => {\n                  e.stopPropagation();\n                  const values = getSelectValueArr(value, value[key], true, valueType, keys);\n\n                  const selectedOptions = getSelectedOptions(values, multiple, valueType, keys, tmpPropOptions);\n                  onChange(values, { e, selectedOptions, trigger: 'uncheck' });\n                  tagProps?.onClose?.({ e });\n\n                  onRemove?.({\n                    value: value[key],\n                    data: { label: v, value: value[key] },\n                    e: e as unknown as React.MouseEvent<HTMLDivElement, MouseEvent>,\n                  });\n                }}\n              >\n                {v}\n              </Tag>\n            );\n          });\n      }\n      if (typeof valueDisplay === 'string') {\n        return valueDisplay;\n      }\n      if (multiple) {\n        return ({ onClose }) => parseContentTNode(valueDisplay, { value: selectedLabel, onClose });\n      }\n      return parseContentTNode(valueDisplay, { value: selectedLabel, onClose: noop });\n    };\n\n    // 将第一个选中的 option 置于列表可见范围的最后一位\n    const updateScrollTop = (content: HTMLDivElement) => {\n      if (!content || isScrolling) {\n        return;\n      }\n      const firstSelectedNode: HTMLDivElement = content.querySelector(`.${classPrefix}-is-selected`);\n      if (!multiple && firstSelectedNode) {\n        const { paddingBottom } = getComputedStyle(firstSelectedNode);\n        const { marginBottom } = getComputedStyle(content);\n        const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n        // 小于0时不需要特殊处理，会被设为0\n        const updateValue =\n          firstSelectedNode.offsetTop -\n          content.offsetTop -\n          (content.clientHeight - firstSelectedNode.clientHeight) +\n          elementBottomHeight;\n        // eslint-disable-next-line no-param-reassign\n        content.scrollTop = updateValue;\n      }\n    };\n\n    const { onMouseEnter, onMouseLeave } = props;\n\n    const handleEnter = (_, context: { inputValue: string; e: KeyboardEvent<HTMLDivElement> }) => {\n      onEnter?.({ ...context, value });\n    };\n\n    const handleScroll = ({ e }: { e: WheelEvent<HTMLDivElement> }) => {\n      toggleIsScrolling(true);\n\n      onScroll?.({ e });\n      if (onScrollToBottom) {\n        const debounceOnScrollBottom = debounce((e) => onScrollToBottom({ e }), 100);\n\n        const { scrollTop, clientHeight, scrollHeight } = e.target as HTMLDivElement;\n        if (clientHeight + Math.floor(scrollTop) === scrollHeight) {\n          debounceOnScrollBottom(e);\n        }\n      }\n    };\n    return (\n      <div\n        className={classNames(`${name}__wrap`, className)}\n        style={style}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        <SelectInput\n          autoWidth={!style?.width && autoWidth}\n          ref={composeRefs(ref, selectInputRef)}\n          className={name}\n          readonly={readonly}\n          autofocus={props.autofocus}\n          allowInput={(filterable ?? local.filterable) || isFunction(filter)}\n          multiple={multiple}\n          value={selectedLabel}\n          valueDisplay={renderValueDisplay()}\n          clearable={clearable}\n          disabled={disabled}\n          status={props.status}\n          tips={props.tips}\n          borderless={borderless}\n          label={prefixIcon}\n          suffix={props.suffix}\n          suffixIcon={renderSuffixIcon()}\n          panel={renderContent()}\n          placeholder={!multiple && showPopup && selectedLabel ? selectedLabel : placeholder || t(local.placeholder)}\n          inputValue={inputValue}\n          tagInputProps={{\n            size,\n            ...tagInputProps,\n          }}\n          tagProps={{ size, ...tagProps }}\n          inputProps={{\n            size,\n            ...inputProps,\n          }}\n          minCollapsedNum={minCollapsedNum}\n          collapsedItems={collapsedItems}\n          updateScrollTop={updateScrollTop}\n          popupProps={{\n            overlayClassName: [`${name}__dropdown`, overlayClassName],\n            onScroll: handleScroll,\n            ...restPopupProps,\n          }}\n          popupVisible={showPopup}\n          onPopupVisibleChange={handleShowPopup}\n          onTagChange={onTagChange}\n          onInputChange={handleInputChange}\n          onFocus={onFocus}\n          onEnter={handleEnter}\n          onBlur={(_, context) => {\n            onBlur?.({ value, e: context.e as React.FocusEvent<HTMLDivElement> });\n          }}\n          onClear={onClearValue}\n          {...selectInputProps}\n        />\n      </div>\n    );\n  },\n  { Option, OptionGroup },\n);\n\nSelect.displayName = 'Select';\n\nexport default Select;\n"],"names":["Select","forwardRefWithStatics","originalProps","ref","props","useDefaultProps","selectDefaultProps","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","emptyText","loadingText","readonly","borderless","autoWidth","creatable","filter","_props$loadingText","max","popupProps","reserveKeyword","className","style","disabled","size","multiple","placeholder","clearable","prefixIcon","options","filterable","loading","onFocus","onBlur","_props$onClear","onClear","noop","onCreate","onRemove","onSearch","empty","valueType","keys","children","collapsedItems","minCollapsedNum","valueDisplay","onEnter","showArrow","inputProps","panelBottomContent","panelTopContent","selectInputProps","tagInputProps","tagProps","scroll","suffixIcon","onPopupVisibleChange","_useControlled","useControlled","onChange","_useControlled2","value","selectInputRef","useRef","_useConfig","useConfig","classPrefix","_ref","overlayClassName","onScroll","onScrollToBottom","restPopupProps","_objectWithoutProperties","_excluded","_useState","useState","_useState2","isScrolling","toggleIsScrolling","name","_useControlled3","_useControlled4","showPopup","setShowPopup","_useControlled5","onInputChange","_useControlled6","inputValue","_useOptions","useOptions","currentOptions","setCurrentOptions","tmpPropOptions","valueToOption","selectedOptions","selectedLabel","useMemo","map","selectedOption","get","label","handleShowPopup","visible","ctx","trigger","onTagChange","_currentTags","context","index","item","e","stopPropagation","closest","len","_selectedOptions$len","values","getSelectValueArr","currentSelectedOptions","getSelectedOptions","isFunction","data","onCheckAllChange","checkAll","_props$value","selectableOptions","option","checkAllValue","length","handleChange","handleFilter","filteredOptions","Array","isArray","Object","upperValue","toUpperCase","includes","isSameLabelOptionExist","find","concat","handleInputChange","onClearValue","useEffect","String","renderSuffixIcon","React","createElement","Loading","classNames","FakeArrow","isActive","getPopupInstance","useCallback","_selectInputRef$curre","current","getPopupContentElement","childrenWithProps","Children","child","isValidElement","addedProps","cloneElement","_objectSpread","renderContent","popupContentProps","show","PopupContent","renderValueDisplay","_ref2","val","slice","v","key","filterOption","Tag","closable","onClose","_ref3","_tagProps$onClose","call","_ref4","parseContentTNode","updateScrollTop","content","firstSelectedNode","querySelector","_getComputedStyle","getComputedStyle","paddingBottom","_getComputedStyle2","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","onMouseEnter","onMouseLeave","handleEnter","_","handleScroll","_ref5","debounceOnScrollBottom","debounce","_e$target","target","scrollHeight","Math","floor","SelectInput","width","composeRefs","autofocus","allowInput","status","tips","suffix","panel","popupVisible","Option","OptionGroup","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CMA,IAAAA,MAAS,GAAAC,qBAAA,CACb,UAACC,eAA4BC,GAAmC,EAAA;AACxD,EAAA,IAAAC,KAAA,GAAQC,eAA6B,CAAAH,aAAA,EAAeI,kBAAkB,CAAA,CAAA;AAE5E,EAAA,IAAAC,kBAAA,GAAmBC,kBAAkB,QAAQ,CAAA;IAAAC,mBAAA,GAAAC,cAAA,CAAAH,kBAAA,EAAA,CAAA,CAAA;AAAtCI,IAAAA,KAAA,GAAAF,mBAAA,CAAA,CAAA,CAAA;AAAOG,IAAAA,CAAC,GAAAH,mBAAA,CAAA,CAAA,CAAA,CAAA;AACT,EAAA,IAAAI,SAAA,GAAYD,CAAE,CAAAD,KAAA,CAAMG,WAAW,CAAA,CAAA;AAE/B,EAAA,IACJC,QAAA,GA4CEX,KAAA,CA5CFW,QAAA;IACAC,UAAA,GA2CEZ,KAAA,CA3CFY,UAAA;IACAC,SAAA,GA0CEb,KAAA,CA1CFa,SAAA;IACAC,SAAA,GAyCEd,KAAA,CAzCFc,SAAA;IACAC,MAAA,GAwCEf,KAAA,CAxCFe,MAAA;IAAAC,kBAAA,GAwCEhB,KAAA,CAvCFU,WAAc;AAAdA,IAAAA,WAAc,GAAAM,kBAAA,KAAAP,KAAAA,CAAAA,GAAAA,SAAA,GAAAO,kBAAA;IACdC,GAAA,GAsCEjB,KAAA,CAtCFiB,GAAA;IACAC,UAAA,GAqCElB,KAAA,CArCFkB,UAAA;IACAC,cAAA,GAoCEnB,KAAA,CApCFmB,cAAA;IACAC,SAAA,GAmCEpB,KAAA,CAnCFoB,SAAA;IACAC,KAAA,GAkCErB,KAAA,CAlCFqB,KAAA;IACAC,QAAA,GAiCEtB,KAAA,CAjCFsB,QAAA;IACAC,IAAA,GAgCEvB,KAAA,CAhCFuB,IAAA;IACAC,QAAA,GA+BExB,KAAA,CA/BFwB,QAAA;IACAC,WAAA,GA8BEzB,KAAA,CA9BFyB,WAAA;IACAC,SAAA,GA6BE1B,KAAA,CA7BF0B,SAAA;IACAC,UAAA,GA4BE3B,KAAA,CA5BF2B,UAAA;IACAC,OAAA,GA2BE5B,KAAA,CA3BF4B,OAAA;IACAC,UAAA,GA0BE7B,KAAA,CA1BF6B,UAAA;IACAC,OAAA,GAyBE9B,KAAA,CAzBF8B,OAAA;IACAC,OAAA,GAwBE/B,KAAA,CAxBF+B,OAAA;IACAC,OAAA,GAuBEhC,KAAA,CAvBFgC,MAAA;IAAAC,cAAA,GAuBEjC,KAAA,CAtBFkC,OAAU;AAAVA,IAAAA,OAAU,GAAAD,cAAA,KAAAE,KAAAA,CAAAA,GAAAA,IAAA,GAAAF,cAAA;IACVG,QAAA,GAqBEpC,KAAA,CArBFoC,QAAA;IACAC,QAAA,GAoBErC,KAAA,CApBFqC,QAAA;IACAC,QAAA,GAmBEtC,KAAA,CAnBFsC,QAAA;IACAC,KAAA,GAkBEvC,KAAA,CAlBFuC,KAAA;IACAC,SAAA,GAiBExC,KAAA,CAjBFwC,SAAA;IACAC,IAAA,GAgBEzC,KAAA,CAhBFyC,IAAA;IACAC,QAAA,GAeE1C,KAAA,CAfF0C,QAAA;IACAC,cAAA,GAcE3C,KAAA,CAdF2C,cAAA;IACAC,eAAA,GAaE5C,KAAA,CAbF4C,eAAA;IACAC,YAAA,GAYE7C,KAAA,CAZF6C,YAAA;IACAC,OAAA,GAWE9C,KAAA,CAXF8C,OAAA;IACAC,SAAA,GAUE/C,KAAA,CAVF+C,SAAA;IACAC,UAAA,GASEhD,KAAA,CATFgD,UAAA;IACAC,kBAAA,GAQEjD,KAAA,CARFiD,kBAAA;IACAC,eAAA,GAOElD,KAAA,CAPFkD,eAAA;IACAC,gBAAA,GAMEnD,KAAA,CANFmD,gBAAA;IACAC,aAAA,GAKEpD,KAAA,CALFoD,aAAA;IACAC,QAAA,GAIErD,KAAA,CAJFqD,QAAA;IACAC,MAAA,GAGEtD,KAAA,CAHFsD,MAAA;IACAC,UAAA,GAEEvD,KAAA,CAFFuD,UAAA;IACAC,oBAAA,GACExD,KAAA,CADFwD,oBAAA,CAAA;EAGI,IAAAC,cAAA,GAAoBC,cAAc1D,KAAO,EAAA,OAAA,EAASA,MAAM2D,QAAQ,CAAA;IAAAC,eAAA,GAAAtD,cAAA,CAAAmD,cAAA,EAAA,CAAA,CAAA;AAA/DI,IAAAA;AAAOF,IAAAA,QAAQ,GAAAC,eAAA,CAAA,CAAA,CAAA,CAAA;AAChB,EAAA,IAAAE,cAAA,GAAiBC,OAAO,IAAI,CAAA,CAAA;AAC5B,EAAA,IAAAC,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AACpB,EAAA,IAAAC,IAAA,GAA4EjD,cAAc,EAAC;IAAnFkD,gBAAkB,GAAAD,IAAA,CAAlBC,gBAAkB;IAAAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;IAAUC,wBAAAA;AAAqBC,IAAAA,cAAe,GAAAC,wBAAA,CAAAL,IAAA,EAAAM,SAAA,CAAA,CAAA;AACxE,EAAA,IAAAC,SAAA,GAAyCC,SAAS,KAAK,CAAA;IAAAC,UAAA,GAAAtE,cAAA,CAAAoE,SAAA,EAAA,CAAA,CAAA;AAAhDG,IAAAA,WAAA,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAaE,IAAAA,iBAAiB,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAErC,EAAA,IAAMG,iBAAUb,WAAA,EAAA,SAAA,CAAA,CAAA;EAEhB,IAAAc,eAAA,GAAkCtB,aAAc,CAAA1D,KAAA,EAAO,gBAAgBwD,oBAAoB,CAAA;IAAAyB,eAAA,GAAA3E,cAAA,CAAA0E,eAAA,EAAA,CAAA,CAAA;AAApFE,IAAAA,SAAW,GAAAD,eAAA,CAAA,CAAA,CAAA;AAAAE,IAAAA,YAAY,GAAAF,eAAA,CAAA,CAAA,CAAA,CAAA;EACxB,IAAAG,eAAA,GAA8B1B,cAAc1D,KAAO,EAAA,YAAA,EAAcA,MAAMqF,aAAa,CAAA;IAAAC,eAAA,GAAAhF,cAAA,CAAA8E,eAAA,EAAA,CAAA,CAAA;AAAnFG,IAAAA;AAAYF,IAAAA,aAAa,GAAAC,eAAA,CAAA,CAAA,CAAA,CAAA;AAEhC,EAAA,IAAAE,WAAA,GAA8FC,UAAA,CAC5FhD,IAAA,EACAb,OAAA,EACAc,QAAA,EACAF,SAAA,EACAqB,KAAA,EACA1C,cACF,CAAA;IAPQuE,cAAgB,GAAAF,WAAA,CAAhBE,cAAgB;IAAAC,iBAAA,GAAAH,WAAA,CAAAG,iBAAA;IAAmBC,cAAgB,GAAAJ,WAAA,CAAhBI,cAAgB;IAAAC,aAAA,GAAAL,WAAA,CAAAK,aAAA;IAAeC,8BAAAA;AASpE,EAAA,IAAAC,aAAA,GAAgBC,QAAQ,YAAM;AAClC,IAAA,IAAIxE,QAAU,EAAA;AACZ,MAAA,OAAOsE,eAAgB,CAAAG,GAAA,CAAI,UAACC,cAAA,EAAA;AAAA,QAAA,OAAmBC,KAAI,CAAAD,cAAA,IAAkB,EAAC,EAAG,CAAAzD,IAAM,aAANA,IAAM,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAANA,IAAM,CAAA2D,KAAA,KAAS,OAAO,CAAA,IAAK,EAAE,CAAA;OAAA,CAAA,CAAA;AACxG,KAAA;IACO,OAAAD,KAAA,CAAIL,gBAAgB,CAAM,CAAA,IAAA,IAAI,CAAArD,IAAM,KAANA,IAAAA,IAAAA,IAAM,KAANA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,IAAM,CAAA2D,KAAA,KAAS,OAAO,CAAK,IAAA,KAAA,CAAA,CAAA;GAC/D,EAAA,CAACN,eAAiB,EAAArD,IAAA,EAAMjB,QAAQ,CAAC,CAAA,CAAA;EAE9B,IAAA6E,eAAA,GAAkB,SAAlBA,eAAAA,CAAmBC,OAAA,EAAkBC,GAAmC,EAAA;AACxE,IAAA,IAAAjF,QAAA,EAAU,OAAA;AACdgF,IAAAA,OAAA,IAAWxB,kBAAkB,KAAK,CAAA,CAAA;AAClC,IAAA,CAACwB,WAAWjB,aAAc,CAAA,EAAA,EAAI;AAAEmB,MAAAA,OAAA,EAAS,MAAA;AAAO,KAAC,CAAA,CAAA;AACjDrB,IAAAA,YAAA,CAAamB,SAASC,GAAG,CAAA,CAAA;GAC3B,CAAA;EAGM,IAAAE,WAAA,GAAc,SAAdA,WAAAA,CAAeC,YAAA,EAAgCC,OAAY,EAAA;AAC/D,IAAA,IAAQH,OAAA,GAA4BG,OAAA,CAA5BH,OAAA;MAASI,KAAO,GAAYD,OAAA,CAAnBC,KAAO;MAAAC,IAAA,GAAYF,OAAA,CAAZE,IAAA;MAAMC,IAAMH,OAAA,CAANG;IAE9B,IAAIN,YAAY,WAAa,EAAA;MAC3BM,CAAA,CAAEC,eAAgB,EAAA,CAAA;MAElB,IAAIC,OAAU,GAAA,CAAA,CAAA,CAAA;MACd,IAAIC,GAAM,GAAAL,KAAA,CAAA;MACV,OAAOK,OAAO,CAAG,EAAA;AAAA,QAAA,IAAAC,oBAAA,CAAA;AACX,QAAA,IAAA,EAAAA,CAAAA,oBAAA,GAACpB,eAAgB,CAAAmB,GAAA,CAAA,MAAA,IAAA,IAAAC,oBAAA,KAAA,KAAA,CAAA,IAAhBA,oBAAA,CAAsB5F,QAAU,CAAA,EAAA;AACzB0F,UAAAA,OAAA,GAAAC,GAAA,CAAA;AACV,UAAA,MAAA;AACF,SAAA;AACOA,QAAAA,GAAA,IAAA,CAAA,CAAA;AACT,OAAA;MACA,IAAID,UAAU,CAAG,EAAA;AACf,QAAA,OAAA;AACF,OAAA;AACA,MAAA,IAAMG,SAASC,iBAAkB,CAAAvD,KAAA,EAAOA,MAAMmD,OAAU,CAAA,EAAA,IAAA,EAAMxE,WAAWC,IAAI,CAAA,CAAA;AAG7E,MAAA,IAAM4E,yBAAyBC,kBAAmB,CAAAH,MAAA,EAAQ3F,QAAU,EAAAgB,SAAA,EAAWC,MAAMmD,cAAc,CAAA,CAAA;MACnGjC,QAAA,CAASwD,QAAQ;AAAEL,QAAAA,CAAA,EAAAA,CAAA;AAAGN,QAAAA,OAAS,EAATA,OAAS;AAAAV,QAAAA,eAAA,EAAiBuB,sBAAAA;AAAuB,OAAC,CAAA,CAAA;AACxE,MAAA,OAAA;AACF,KAAA;IAEA,IAAIb,YAAY,OAAS,EAAA;MACvBM,CAAA,CAAEC,eAAgB,EAAA,CAAA;MACTpD,QAAA,CAAA,IAAI;AAAEmD,QAAAA,CAAA,EAAAA,CAAA;AAAGN,QAAAA,SAAAA;AAASV,QAAAA,eAAiB,EAAA,EAAA;AAAG,OAAC,CAAA,CAAA;AAChD,MAAA,OAAA;AACF,KAAA;IAEA,IAAIU,YAAY,YAAc,EAAA;MAC5BM,CAAA,CAAEC,eAAgB,EAAA,CAAA;AAClB,MAAA,IAAMI,UAASC,iBAAkB,CAAAvD,KAAA,EAAOA,MAAM+C,KAAQ,CAAA,EAAA,IAAA,EAAMpE,WAAWC,IAAI,CAAA,CAAA;AAE3E,MAAA,IAAM4E,0BAAyBC,kBAAmB,CAAAH,OAAA,EAAQ3F,QAAU,EAAAgB,SAAA,EAAWC,MAAMmD,cAAc,CAAA,CAAA;MAEnGjC,QAAA,CAASwD,SAAQ;AAAEL,QAAAA,CAAA,EAAAA,CAAA;AAAGN,QAAAA,OAAS,EAATA,OAAS;AAAAV,QAAAA,eAAA,EAAiBuB,uBAAAA;AAAuB,OAAC,CAAA,CAAA;AACpE,MAAA,IAAAE,YAAA,CAAWlF,QAAQ,CAAG,EAAA;AACfA,QAAAA,QAAA,CAAA;AACPwB,UAAAA,OAAOA,KAAM,CAAA+C,KAAA,CAAA;AACbY,UAAAA,IAAM,EAAA;AACJpB,YAAAA,KAAO,EAAAS,IAAA;YACPhD,OAAOA,KAAM,CAAA+C,KAAA,CAAA;WACf;AACAE,UAAAA,CAAA,EAAAA,CAAAA;AACF,SAAC,CAAA,CAAA;AACH,OAAA;AACF,KAAA;GACF,CAAA;EACM,IAAAW,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,QAAA,EAAmBZ,CAAuC,EAAA;AAAA,IAAA,IAAAa,YAAA,CAAA;IAClF,IAAI,CAACnG,QAAU,EAAA;AACb,MAAA,OAAA;AACF,KAAA;AACA,IAAA,IAAMoG,oBAAoBlC,cACvB,CAAA3E,MAAA,CAAO,UAAC8G,MAAA,EAAA;MAAA,OAAW,CAACA,MAAO,CAAAH,QAAA,IAAY,CAACG,MAAA,CAAOvG,QAAQ,CAAA;AAAA,KAAA,CACvD,CAAA2E,GAAA,CAAI,UAAC4B,MAAA,EAAA;MAAA,OAAWA,OAAOhE,KAAK,CAAA;KAAA,CAAA,CAAA;IAEzB,IAAAiE,aAAA,GACJ,CAACJ,QAAY,IAAAE,iBAAA,CAAkBG,4BAAY/H,KAAM,CAAA6D,KAAA,MAAA8D,IAAAA,IAAAA,YAAA,KAANA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAA,CAAqCI,MAAS,CAAA,GAAAH,iBAAA,GAAoB,EAAC,CAAA;AACrGjE,IAAAA,QAAA,aAAAA,QAAA,KAAA,KAAA,CAAA,IAAAA,QAAA,CAAAmE,aAAA,EAAe;AAAEhB,MAAAA,CAAG,EAAHA,CAAG;AAAAN,MAAAA,OAAA,EAASkB,WAAW,OAAU,GAAA,SAAA;AAAW5B,MAAAA,eAAiB,EAAAgC,aAAAA;AAAc,KAAC,CAAA,CAAA;GAC1G,CAAA;EAGM,IAAAE,YAAA,GAAe,SAAfA,YAAAA,CACJnE,MAAAA,EACA8C,OACG,EAAA;AACH,IAAA,IAAInF,QAAU,EAAA;AACX,MAAA,CAAAL,cAAA,IAAkBoE,UAAc,IAAAF,aAAA,CAAc,EAAI,EAAA;QAAEyB,GAAGH,OAAQ,CAAAG,CAAA;AAAGN,QAAAA,OAAS,EAAA,QAAA;AAAS,OAAC,CAAA,CAAA;AACxF,KAAA;AACI,IAAA,IAAA1F,SAAA,IAAayG,YAAW,CAAAnF,QAAQ,CAAG,EAAA;AAChC,MAAA,IAAAR,OAAA,CAAwBb,OAAO,UAAC8G,MAAA,EAAA;AAAA,QAAA,OAAWA,OAAOhE,KAAUA,KAAAA,MAAK,CAAA;AAAA,OAAA,CAAE,CAAAkE,MAAA,KAAW,CAAG,EAAA;QACpF3F,QAAA,CAASyB,MAAe,CAAA,CAAA;AAC1B,OAAA;AACF,KAAA;AAEA,IAAA,IAAMwD,yBAAyBC,kBAAmBzD,CAAAA,MAAAA,EAAOrC,QAAU,EAAAgB,SAAA,EAAWC,MAAMmD,cAAc,CAAA,CAAA;IAElGjC,QAAA,KAAA,IAAA,IAAAA,QAAA,KAAA,KAAA,CAAA,IAAAA,QAAA,CAAWE,wCAAY8C,OAAS,CAAA,EAAA,EAAA,EAAA;AAAAb,MAAAA,eAAA,EAAiBuB,sBAAAA;MAAwB,CAAA,CAAA;GAC3E,CAAA;AAGM,EAAA,IAAAY,YAAA,GAAe,SAAfA,YAAAA,CAAgBpE,MAAkB,EAAA;IACtC,IAAIqE,kBAA+B,EAAC,CAAA;AAChC,IAAA,IAAArG,UAAA,IAAc0F,YAAW,CAAAjF,QAAQ,CAAG,EAAA;AACtC,MAAA,OAAA;AACF,KAAA;IACA,IAAI,CAACuB,MAAO,EAAA;MACV8B,iBAAA,CAAkBC,cAAc,CAAA,CAAA;AAChC,MAAA,OAAA;AACF,KAAA;AAEI,IAAA,IAAA7E,MAAA,IAAUwG,YAAW,CAAAxG,MAAM,CAAG,EAAA;AAE5B,MAAA,IAAAoH,KAAA,CAAMC,OAAQ,CAAAxC,cAAc,CAAG,EAAA;AACjCsC,QAAAA,eAAA,GAAkBtC,eAAe7E,MAAO,CAAA,UAAC8G;iBAAW9G,MAAO8C,CAAAA,MAAAA,EAAOgE,MAAM,CAAC,CAAA;SAAA,CAAA,CAAA;AAC3E,iBAAWM,KAAM,CAAAC,OAAA,CAAQC,OAAOlB,MAAO,CAAAtB,aAAa,CAAC,CAAG,EAAA;QACpCqC,eAAA,GAAAG,MAAA,CAAOlB,MAAO,CAAAtB,aAAa,CAAE,CAAA9E,MAAA,CAAO,UAAC8G,MAAW,EAAA;AAAA,UAAA,OAAA9G,MAAA,CAAO8C,MAAO,EAAAgE,MAAM,CAAC,CAAA;SAAA,CAAA,CAAA;AACzF,OAAA;KACS,MAAA,IAAAM,KAAA,CAAMC,OAAQ,CAAAxC,cAAc,CAAG,EAAA;AAClC,MAAA,IAAA0C,UAAA,GAAazE,OAAM0E,WAAY,EAAA,CAAA;AACnBL,MAAAA,eAAA,GAAAtC,cAAA,CAAe7E,MAAO,CAAA,UAAC8G,MAAY,EAAA;AAAA,QAAA,OAAA,CAAA,CAAAA,MAAA,aAAAA,MAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,MAAA,CAAQzB,KAAS,KAAA,EAAA,EAAImC,WAAY,EAAA,CAAEC,QAAS,CAAAF,UAAU,CAAC,CAAA;OAAA,CAAA,CAAA;AAC9G,KAAA;AACA,IAAA,IAAMG,yBAAyBP,eAAgB,CAAAQ,IAAA,CAAK,UAACb,MAAW,EAAA;AAAA,MAAA,OAAAA,MAAA,CAAOzB,UAAUvC,MAAK,CAAA;KAAA,CAAA,CAAA;AAClF,IAAA,IAAA/C,SAAA,IAAa,CAAC2H,sBAAwB,EAAA;AACtBP,MAAAA,eAAA,GAAAA,eAAA,CAAgBS,OAAO,CAAC;AAAEvC,QAAAA,OAAOvC,MAAO;AAAAA,QAAAA,KAAA,EAAAA,MAAAA;AAAM,OAAC,CAAC,CAAA,CAAA;AACpE,KAAA;IACA8B,iBAAA,CAAkBuC,eAAe,CAAA,CAAA;GACnC,CAAA;EAGM,IAAAU,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqB/E,MAAAA,EAAe8C,OAA2C,EAAA;AAC/E,IAAA,IAAAA,OAAA,CAAQH,YAAY,OAAS,EAAA;MAC/BnB,aAAA,CAAcxB,QAAO;QAAEiD,CAAA,EAAGH,QAAQG,CAAG;AAAAN,QAAAA,OAAA,EAAS,OAAA;AAAQ,OAAC,CAAA,CAAA;AACzD,KAAA;AACA,IAAA,IAAI3C,WAAU,KAAW,CAAA,EAAA;AACvB,MAAA,OAAA;AACF,KAAA;AACI,IAAA,IAAA0D,YAAA,CAAWjF,QAAQ,CAAG,EAAA;MACxBA,QAAA,CAASuB,MAAO,EAAA;QAAEiD,CAAG,EAAAH,OAAA,CAAQG,CAAAA;AAAmC,OAAC,CAAA,CAAA;AACjE,MAAA,OAAA;AACF,KAAA;GACF,CAAA;AAEM,EAAA,IAAA+B,YAAA,GAAe,SAAfA,YAAAA,CAAgBlC,OAAY,EAAA;AAChCA,IAAAA,OAAA,CAAQG,EAAEC,eAAgB,EAAA,CAAA;AACtB,IAAA,IAAAoB,KAAA,CAAMC,OAAQ,CAAAvE,KAAK,CAAG,EAAA;AACfF,MAAAA,QAAA,CAAA,oCAASgD;AAASb,QAAAA,eAAiB,EAAA,EAAA;QAAI,CAAA,CAAA;AAClD,KAAO,MAAA;AACLnC,MAAAA,QAAA,CAAS,sCAAWgD;AAASb,QAAAA,eAAiB,EAAA,EAAA;QAAI,CAAA,CAAA;AACpD,KAAA;IACA5D,OAAA,CAAQyE,OAAO,CAAA,CAAA;GACjB,CAAA;AAEAmC,EAAAA,SAAA,CAAU,YAAM;AACV,IAAA,IAAA,OAAOvD,eAAe,WAAa,EAAA;AACxB0C,MAAAA,YAAA,CAAAc,MAAA,CAAOxD,UAAU,CAAC,CAAA,CAAA;AACjC,KAAA;AAEF,GAAG,EAAA,CAACA,UAAY,EAAAK,cAAc,CAAC,CAAA,CAAA;AAG/B,EAAA,IAAMoD,mBAAmB,SAAnBA,mBAAyB;AAC7B,IAAA,IAAIzF,UAAY,EAAA;AACP,MAAA,OAAAA,UAAA,CAAA;AACT,KAAA;AACA,IAAA,IAAIzB,OAAS,EAAA;AACX,MAAA,sBACGmH,KAAA,CAAAC,aAAA,CAAAC,OAAA,EAAA;QAAQ/H,SAAW,EAAAgI,UAAA,CAAA,EAAA,CAAAT,MAAA,CAAc5D,IAAA,EAAA,cAAA,CAAA,EAAA,EAAA,CAAA4D,MAAA,CAAuB5D,IAAmB,EAAA,eAAA,CAAA,CAAA;AAAGjD,QAAAA,OAAS,EAAA,IAAA;AAAMP,QAAAA,IAAK,EAAA,OAAA;AAAQ,OAAA,CAAA,CAAA;AAE/G,KAAA;IAEA,OAAOwB,4BAAckG,KAAA,CAAAC,aAAA,CAAAG,SAAA,EAAA;AAAUjI,MAAAA,qBAAc2D,IAAA,EAAA,cAAA,CAAA;AAAoBuE,MAAAA,QAAU,EAAApE,SAAA;AAAW5D,MAAAA,QAAA,EAAAA,QAAAA;AAAoB,KAAA,CAAA,CAAA;GAC5G,CAAA;EACM,IAAAiI,gBAAA,GAAmBC,YAAY,YAAA;AAAA,IAAA,IAAAC,qBAAA,CAAA;AAAA,IAAA,OAAA,CAAAA,qBAAA,GAAO3F,cAAA,CAAuB4F,iEAAvBD,qBAAA,CAAgCE,sBAAuB,EAAA,CAAA;AAAA,GAAA,EAAG,EAAE,CAAA,CAAA;EAExG,IAAMC,iBAAoB,GAAAC,QAAA,CAAS5D,GAAI,CAAAvD,QAAA,EAAU,UAACoH,KAAU,EAAA;AACtD,IAAA,kBAAAC,cAAA,CAAeD,KAAK,CAAG,EAAA;AACnB,MAAA,IAAAE,UAAA,GAAa;AAAExI,QAAAA,QAAS,EAATA,QAAAA;OAAS,CAAA;MAC9B,oBAAOyI,YAAa,CAAAH,KAAA,EAAAI,aAAA,CAAYF,EAAAA,EAAAA,WAAY,CAAA,CAAA;AAC9C,KAAA;AACO,IAAA,OAAAF,KAAA,CAAA;AACT,GAAC,CAAA,CAAA;AAED,EAAA,IAAMK,gBAAgB,SAAhBA,gBAAsB;AAC1B,IAAA,IAAMC,iBAAoB,GAAA;AACxBzG,MAAAA,QAAU,EAAAqE,YAAA;AACVnE,MAAAA,KAAA,EAAAA,KAAA;AACAzC,MAAAA,SAAA,EAAAA,SAAA;AACAG,MAAAA,IAAA,EAAAA,IAAA;AACAC,MAAAA,QAAA,EAAAA,QAAA;AACA0D,MAAAA,SAAA,EAAAA,SAAA;MAEAC,cAAc,SAAAA,YAAAA,CAACkF,IAAA,EAAA;AAAA,QAAA,OAAkBhE,eAAgB,CAAAgE,IAAA,EAAM,EAAE,CAAA,CAAA;AAAA,OAAA;AACzDzI,MAAAA,OAAS,EAAA8D,cAAA;AACTnD,MAAAA,KAAA,EAAAA,KAAA;AACAtB,MAAAA,GAAA,EAAAA,GAAA;AACAP,MAAAA,WAAA,EAAAA,WAAA;AACAoB,MAAAA,OAAA,EAAAA,OAAA;AACAU,MAAAA,SAAA,EAAAA,SAAA;AACAC,MAAAA,IAAA,EAAAA,IAAA;AACAQ,MAAAA,kBAAA,EAAAA,kBAAA;AACAC,MAAAA,eAAA,EAAAA,eAAA;AACAuE,MAAAA,gBAAA,EAAAA,gBAAA;AACA8B,MAAAA,gBAAA,EAAAA,gBAAA;AACAjG,MAAAA,MAAA,EAAAA,MAAAA;KACF,CAAA;AACA,IAAA,sBAAQ2F,KAAA,CAAAC,aAAA,CAAAoB,YAAA,EAAAJ,aAAA,CAAiBE,EAAAA,EAAAA,iBAAA,CAAoBR,EAAAA,iBAAkB,CAAA,CAAA;GACjE,CAAA;AAEA,EAAA,IAAMW,qBAAqB,SAArBA,qBAA2B;IAC/B,IAAI,CAAC1H,YAAc,EAAA;MACjB,IAAI,CAACrB,QAAU,EAAA;AACT,QAAA,IAAA,OAAOuE,kBAAkB,QAAU,EAAA;AAC9B,UAAA,OAAAA,aAAA,CAAA;AACT,SAAA;AACO,QAAA,OAAA,EAAA,CAAA;AACT,OAAA;AACA,MAAA,OAAO,UAAAyE,KAAA,EAAA;AAAA,QAAA,IAAUC,GAAI,GAAAD,KAAA,CAAX3G,KAAA,CAAA;QAAA,OACR4G,IAAIC,KAAM,CAAA,CAAA,EAAG9H,eAAkB,GAAAA,eAAA,GAAkB6H,IAAI1C,MAAM,CAAA,CAAE9B,GAAI,CAAA,UAAC0E,GAAWC,GAAgB,EAAA;UAC3F,IAAMC,eAAsDjJ,OAAS,KAATA,IAAAA,IAAAA,OAAS,KAATA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,OAAS,CAAA8G,IAAA,CAAK,UAACb,MAAW,EAAA;AAAA,YAAA,OAAAA,MAAA,CAAOzB,UAAUuE,CAAC,CAAA;WAAA,CAAA,CAAA;UACxG,sBACG1B,KAAA,CAAAC,aAAA,CAAA4B,GAAA,EAAAZ,aAAA,CAAAA,aAAA,CAAA;AACCU,YAAAA,GAAA,EAAAA,GAAA;AACAG,YAAAA,UAAU,EAACF,YAAA,KAAA,IAAA,IAAAA,YAAA,KAAAA,KAAAA,CAAAA,IAAAA,YAAA,CAAcvJ,QAAY,CAAA,IAAA,CAACA,YAAY,CAACX,QAAA;AACnDY,YAAAA,IAAA,EAAAA,IAAAA;AAAA,WAAA,EACI8B,QAAA,CAAA,EAAA,EAAA,EAAA;AACJ2H,YAAAA,OAAS,EAAA,SAAAA,OAAAC,CAAAA,KAAA,EAAW;AAAA,cAAA,IAAAC,iBAAA,CAAA;AAAA,cAAA,IAARpE,CAAA,GAAAmE,KAAA,CAAAnE,CAAA,CAAA;cACVA,CAAA,CAAEC,eAAgB,EAAA,CAAA;AAClB,cAAA,IAAMI,SAASC,iBAAkB,CAAAvD,KAAA,EAAOA,MAAM+G,GAAM,CAAA,EAAA,IAAA,EAAMpI,WAAWC,IAAI,CAAA,CAAA;AAEzE,cAAA,IAAMqD,mBAAkBwB,kBAAmB,CAAAH,MAAA,EAAQ3F,QAAU,EAAAgB,SAAA,EAAWC,MAAMmD,cAAc,CAAA,CAAA;cAC5FjC,QAAA,CAASwD,QAAQ;AAAEL,gBAAAA,CAAA,EAAAA,CAAA;AAAGhB,gBAAAA,iBAAAA,gBAAiB;AAAAU,gBAAAA,OAAA,EAAS,SAAA;AAAU,eAAC,CAAA,CAAA;AACjDnD,cAAAA,QAAA,aAAAA,QAAA,KAAA,KAAA,CAAA,IAAA,CAAA6H,iBAAA,GAAA7H,QAAA,CAAA2H,OAAA,MAAAE,IAAAA,IAAAA,iBAAA,eAAAA,iBAAA,CAAAC,IAAA,CAAA9H,QAAA,EAAU;AAAEyD,gBAAAA,CAAA,EAAAA,CAAAA;AAAE,eAAC,CAAA,CAAA;AAEdzE,cAAAA,QAAA,KAAAA,IAAAA,IAAAA,QAAA,KAAAA,KAAAA,CAAAA,IAAAA,QAAA,CAAA;AACTwB,gBAAAA,OAAOA,KAAM,CAAA+G,GAAA,CAAA;AACbpD,gBAAAA,MAAM;AAAEpB,kBAAAA,KAAA,EAAOuE,CAAG;kBAAA9G,KAAA,EAAOA,MAAM+G,GAAK,CAAA;iBAAA;AACpC9D,gBAAAA,CAAA,EAAAA,CAAAA;AACF,eAAC,CAAA,CAAA;AACH,aAAA;AAAA,WAAA,CAAA,EAEC6D,CACH,CAAA,CAAA;AAEJ,SAAC,CAAA,CAAA;AAAA,OAAA,CAAA;AACL,KAAA;AACI,IAAA,IAAA,OAAO9H,iBAAiB,QAAU,EAAA;AAC7B,MAAA,OAAAA,YAAA,CAAA;AACT,KAAA;AACA,IAAA,IAAIrB,QAAU,EAAA;AACL,MAAA,OAAA,UAAA4J,KAAA,EAAA;AAAA,QAAA,IAAGJ,OAAA,GAAAI,KAAA,CAAAJ,OAAA,CAAA;QAAA,OAAcK,iBAAA,CAAkBxI,cAAc;AAAEgB,UAAAA,KAAA,EAAOkC,aAAe;AAAAiF,UAAAA,OAAA,EAAAA,OAAAA;AAAQ,SAAC,CAAA,CAAA;AAAA,OAAA,CAAA;AAC3F,KAAA;IACA,OAAOK,kBAAkBxI,YAAc,EAAA;AAAEgB,MAAAA,OAAOkC,aAAe;AAAAiF,MAAAA,OAAA,EAAS7I,IAAAA;AAAK,KAAC,CAAA,CAAA;GAChF,CAAA;AAGM,EAAA,IAAAmJ,eAAA,GAAkB,SAAlBA,eAAAA,CAAmBC,OAA4B,EAAA;AAC/C,IAAA,IAAA,CAACA,WAAW1G,WAAa,EAAA;AAC3B,MAAA,OAAA;AACF,KAAA;IACA,IAAM2G,iBAAoC,GAAAD,OAAA,CAAQE,aAAc,KAAA9C,MAAA,CAAIzE,WAAyB,EAAA,cAAA,CAAA,CAAA,CAAA;AACzF,IAAA,IAAA,CAAC1C,YAAYgK,iBAAmB,EAAA;AAClC,MAAA,IAAAE,iBAAA,GAA0BC,gBAAA,CAAiBH,iBAAiB,CAAA;QAApDI,aAAA,GAAAF,iBAAA,CAAAE,aAAA,CAAA;AACR,MAAA,IAAAC,kBAAA,GAAyBF,gBAAA,CAAiBJ,OAAO,CAAA;QAAzCO,YAAA,GAAAD,kBAAA,CAAAC,YAAA,CAAA;AACR,MAAA,IAAMC,sBAAsBC,QAAS,CAAAJ,aAAA,EAAe,EAAE,CAAI,GAAAI,QAAA,CAASF,cAAc,EAAE,CAAA,CAAA;AAE7E,MAAA,IAAAG,WAAA,GACJT,kBAAkBU,SAClB,GAAAX,OAAA,CAAQW,aACPX,OAAQ,CAAAY,YAAA,GAAeX,kBAAkBW,YAC1C,CAAA,GAAAJ,mBAAA,CAAA;MAEFR,OAAA,CAAQa,SAAY,GAAAH,WAAA,CAAA;AACtB,KAAA;GACF,CAAA;AAEM,EAAA,IAAEI,YAAc,GAAiBrM,KAAA,CAA/BqM,YAAc;IAAAC,YAAA,GAAiBtM,KAAA,CAAjBsM,YAAA,CAAA;EAEhB,IAAAC,WAAA,GAAc,SAAdA,WAAAA,CAAeC,CAAA,EAAG7F,OAAsE,EAAA;IAC5F7D,OAAA,KAAA,IAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAAoH,aAAA,CAAAA,aAAA,CAAA,EAAA,EAAevD,OAAS,CAAA,EAAA,EAAA,EAAA;AAAA9C,MAAAA,KAAA,EAAAA,KAAAA;AAAA,KAAA,CAAO,CAAA,CAAA;GACjC,CAAA;AAEA,EAAA,IAAM4I,YAAe,GAAA,SAAfA,YAAeA,CAAAC,KAAA,EAA8C;AAAA,IAAA,IAA3C5F,CAAA,GAAA4F,KAAA,CAAA5F,CAAA,CAAA;IACtBhC,iBAAA,CAAkB,IAAI,CAAA,CAAA;AAEXT,IAAAA,QAAA,KAAAA,IAAAA,IAAAA,QAAA,KAAAA,KAAAA,CAAAA,IAAAA,QAAA,CAAA;AAAEyC,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AAChB,IAAA,IAAIxC,gBAAkB,EAAA;AACd,MAAA,IAAAqI,sBAAA,GAAyBC,UAAS,CAAA,UAAC9F,EAAM,EAAA;AAAA,QAAA,OAAAxC,gBAAA,CAAiB;AAAEwC,UAAAA,CAAAA,EAAAA,EAAAA;AAAE,SAAC,CAAA,CAAA;AAAA,OAAA,EAAG,GAAG,CAAA,CAAA;AAE3E,MAAA,IAAA+F,SAAA,GAAkD/F,CAAE,CAAAgG,MAAA;QAA5CV,SAAA,GAAAS,SAAA,CAAAT,SAAA;QAAWD,YAAc,GAAAU,SAAA,CAAdV,YAAc;QAAAY,YAAA,GAAAF,SAAA,CAAAE,YAAA,CAAA;MACjC,IAAIZ,YAAe,GAAAa,IAAA,CAAKC,KAAM,CAAAb,SAAS,MAAMW,YAAc,EAAA;QACzDJ,sBAAA,CAAuB7F,CAAC,CAAA,CAAA;AAC1B,OAAA;AACF,KAAA;GACF,CAAA;AACA,EAAA,sBACGmC,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IACC9H,SAAW,EAAAgI,UAAA,CAAAT,EAAAA,CAAAA,MAAA,CAAc5D,IAAA,EAAA,QAAA,CAAA,EAAc3D,SAAS,CAAA;AAChDC,IAAAA,KAAA,EAAAA,KAAA;AACAgL,IAAAA,YAAA,EAAAA,YAAA;AACAC,IAAAA,YAAA,EAAAA,YAAAA;GAAA,iBAECrD,KAAA,CAAAC,aAAA,CAAAgE,WAAA,EAAAhD,aAAA,CAAA;IACCrJ,SAAA,EAAW,EAACQ,KAAA,KAAAA,IAAAA,IAAAA,KAAA,eAAAA,KAAA,CAAO8L,KAAS,CAAA,IAAAtM,SAAA;AAC5Bd,IAAAA,GAAA,EAAKqN,WAAY,CAAArN,GAAA,EAAK+D,cAAc,CAAA;AACpC1C,IAAAA,SAAW,EAAA2D,IAAA;AACXpE,IAAAA,QAAA,EAAAA,QAAA;IACA0M,WAAWrN,KAAM,CAAAqN,SAAA;AACjBC,IAAAA,UAAa,EAAA,CAAAzL,UAAA,KAAA,IAAA,IAAAA,UAAA,KAAAA,KAAAA,CAAAA,GAAAA,UAAA,GAActB,KAAM,CAAAsB,UAAA,KAAe0F,aAAWxG,MAAM,CAAA;AACjES,IAAAA,QAAA,EAAAA,QAAA;AACAqC,IAAAA,KAAO,EAAAkC,aAAA;IACPlD,cAAc0H,kBAAmB,EAAA;AACjC7I,IAAAA,SAAA,EAAAA,SAAA;AACAJ,IAAAA,QAAA,EAAAA,QAAA;IACAiM,QAAQvN,KAAM,CAAAuN,MAAA;IACdC,MAAMxN,KAAM,CAAAwN,IAAA;AACZ5M,IAAAA,UAAA,EAAAA,UAAA;AACAwF,IAAAA,KAAO,EAAAzE,UAAA;IACP8L,QAAQzN,KAAM,CAAAyN,MAAA;IACdlK,YAAYyF,gBAAiB,EAAA;IAC7B0E,OAAOvD,aAAc,EAAA;AACrB1I,IAAAA,WAAA,EAAa,CAACD,QAAY,IAAA0D,SAAA,IAAaa,gBAAgBA,aAAgB,GAAAtE,WAAA,IAAejB,CAAE,CAAAD,KAAA,CAAMkB,WAAW,CAAA;AACzG8D,IAAAA,UAAA,EAAAA,UAAA;AACAnC,IAAAA,aAAe,EAAA8G,aAAA,CAAA;AACb3I,MAAAA,IAAA,EAAAA,IAAAA;AAAA,KAAA,EACG6B,aAAA,CACL;AACAC,IAAAA,QAAU,EAAA6G,aAAA,CAAA;AAAE3I,MAAAA,IAAM,EAANA,IAAAA;AAAM,KAAA,EAAG8B,QAAS,CAAA;AAC9BL,IAAAA,UAAY,EAAAkH,aAAA,CAAA;AACV3I,MAAAA,IAAA,EAAAA,IAAAA;AAAA,KAAA,EACGyB,UAAA,CACL;AACAJ,IAAAA,eAAA,EAAAA,eAAA;AACAD,IAAAA,cAAA,EAAAA,cAAA;AACA2I,IAAAA,eAAA,EAAAA,eAAA;AACApK,IAAAA,UAAY,EAAAgJ,aAAA,CAAA;AACV9F,MAAAA,gBAAkB,EAAA,CAAAuE,EAAAA,CAAAA,MAAA,CAAI5D,IAAA,EAAA,YAAA,CAAA,EAAkBX,gBAAgB,CAAA;AACxDC,MAAAA,QAAU,EAAAoI,YAAAA;AAAA,KAAA,EACPlI,cAAA,CACL;AACAoJ,IAAAA,YAAc,EAAAzI,SAAA;AACd1B,IAAAA,oBAAsB,EAAA6C,eAAA;AACtBI,IAAAA,WAAA,EAAAA,WAAA;AACApB,IAAAA,aAAe,EAAAuD,iBAAA;AACf7G,IAAAA,OAAA,EAAAA,OAAA;AACAe,IAAAA,OAAS,EAAAyJ,WAAA;AACTvK,IAAAA,MAAA,EAAQ,SAAAA,MAAAA,CAACwK,CAAA,EAAG7F,OAAY,EAAA;AACtB3E,MAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAS;AAAE6B,QAAAA,KAAA,EAAAA,KAAA;QAAOiD,CAAG,EAAAH,OAAA,CAAQG,CAAAA;AAAsC,OAAC,CAAA,CAAA;KACtE;AACA5E,IAAAA,OAAS,EAAA2G,YAAAA;GACL1F,EAAAA,gBAAA,CACN,CACF,CAAA,CAAA;AAEJ,CAAA,EACA;AAAEyK,EAAAA,QAAAA;AAAQC,EAAAA,WAAY,EAAZA,WAAAA;AAAY,CACxB,EAAA;AAEAjO,MAAA,CAAOkO,WAAc,GAAA,QAAA;;;;"}