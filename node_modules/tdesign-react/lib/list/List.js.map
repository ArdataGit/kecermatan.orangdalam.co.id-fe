{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport isString from 'lodash/isString';\nimport useConfig from '../hooks/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\nimport { listDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size,\n      split,\n      stripe,\n      layout,\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style,\n    } = useDefaultProps<ListProps>(props, listDefaultProps);\n\n    const { classPrefix } = useConfig();\n    const [local, t] = useLocaleReceiver('list');\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    const loadElement = isString(asyncLoading) ? (\n      <div\n        className={classNames(`${classPrefix}-list__load`, {\n          [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n          [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n        })}\n        onClick={handleClickLoad}\n      >\n        {asyncLoading === 'loading' && (\n          <div>\n            <Loading loading={true} />\n            <span>{t(local.loadingText)}</span>\n          </div>\n        )}\n        {asyncLoading === 'load-more' && <span>{t(local.loadingMoreText)}</span>}\n      </div>\n    ) : (\n      asyncLoading\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(`${classPrefix}-list`, className, {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header && <div className={`${classPrefix}-list__header`}>{header}</div>}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {asyncLoading && loadElement}\n        {footer && <div className={`${classPrefix}-list__footer`}>{footer}</div>}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","_useDefaultProps","useDefaultProps","listDefaultProps","header","footer","asyncLoading","size","split","stripe","layout","children","className","_useDefaultProps$onLo","onLoadMore","noop","_useDefaultProps$onSc","onScroll","style","_useConfig","useConfig","classPrefix","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","isString","React","createElement","classNames","concat","_defineProperty","onClick","Loading","loading","loadingText","loadingMoreText","ListItem","ListItemMeta","displayName"],"mappings":"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"}