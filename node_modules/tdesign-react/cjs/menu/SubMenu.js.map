{"version":3,"file":"SubMenu.js","sources":["../../src/menu/SubMenu.tsx"],"sourcesContent":["import React, { FC, useContext, useState, ReactElement, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { StyledProps } from '../common';\nimport { TdSubmenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport { MenuContext } from './MenuContext';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../_util/useRipple';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport FakeArrow from '../common/FakeArrow';\nimport { checkIsSubMenu, checkIsMenuGroup } from './_util/checkMenuType';\nimport { cacularPaddingLeft } from './_util/cacularPaddingLeft';\nimport { Popup, PopupPlacement } from '../popup';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1, popupProps } = props;\n\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { classPrefix } = useConfig();\n\n  // popup 状态下控制开关\n  const [open, setOpen] = useState(false);\n  const { expanded = [], onExpand, active, expandType, theme = 'light' } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n    setOpen(false);\n  };\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const childrens = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = cacularPaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      key=\"popup\"\n      style={childStyle}\n    >\n      {childrens}\n    </ul>\n  );\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      onClick={handleClick}\n      style={style}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n      >\n        {icon} <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={level === 1 && isOpen} disabled={disabled} />\n      </div>\n      {!isPopUp && (\n        <ul\n          key=\"normal\"\n          style={{ ...childStyle, '--padding-left': `${menuPaddingLeft}px` } as React.CSSProperties}\n          className={`${classPrefix}-menu__sub`}\n        >\n          {childrens}\n        </ul>\n      )}\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement=\"right-top\"\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, disabled, title, value, level = 1, popupProps } = props;\n\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { active, onChange, expandType, theme = 'light' } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n  const [open, setOpen] = useState(false);\n\n  const handleClick = () => onChange(value);\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  // 斜八角动画\n  const [subMenuDom, setRefCurrent] = useDomRefCallback();\n\n  useRipple(subMenuDom);\n\n  // pupup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return false;\n  }, [disabled, isPopUp, open]);\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n    >\n      {children}\n    </ul>\n  );\n\n  let placement = 'right-top';\n  if (level < 2) {\n    placement = 'bottom-left';\n  }\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        ref={setRefCurrent}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        <span>{title}</span>\n        {isPopUp && <FakeArrow style={fakeArrowStyle} isActive={level === 1 && open} />}\n      </div>\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          `${classPrefix}-is-head-menu`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement={placement as PopupPlacement}\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","_props$children","children","disabled","icon","title","value","className","style","_props$level","level","popupProps","_ref","overlayClassName","overlayInnerClassName","restPopupProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","_useState","useState","_useState2","_slicedToArray","open","setOpen","_useContext","useContext","MenuContext","_useContext$expanded","expanded","onExpand","active","expandType","_useContext$theme","theme","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleVisibleChange","visible","handleMouseEvent","type","childrens","React","Children","map","child","cloneElement","classNames","concat","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","cacularPaddingLeft","fakeArrowStyle","transform","pupContent","createElement","_defineProperty","key","submenu","onClick","onMouseEnter","onMouseLeave","checkSubMenuChildrenActive","FakeArrow","isActive","Popup","_objectSpread","placement","onVisibleChange","SubTitleMenu","_props$level2","_ref4","_excluded2","_useContext2","onChange","_useContext2$theme","_useConfig2","_useState3","_useState4","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","subMenuDom","setRefCurrent","useRipple","ref","SubMenu","_useContext3","mode","_props$level3","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}