/**
 * tdesign v1.7.1
 * (c) 2024 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var slicedToArray = require('../_chunks/dep-c86b4e2f.js');
var React = require('react');
var _common_js_utils_observe = require('../_common/js/utils/observe.js');
require('../_chunks/dep-2e4b81d6.js');

function useElementLazyRender(labelRef, lazyLoad) {
  var ioObserver = React.useRef();
  var _useState = React.useState(!lazyLoad),
    _useState2 = slicedToArray._slicedToArray(_useState, 2),
    showElement = _useState2[0],
    setShowElement = _useState2[1];
  var handleLazyLoad = function handleLazyLoad() {
    if (!lazyLoad || !labelRef.current || ioObserver.current) return;
    setShowElement(false);
    var io = _common_js_utils_observe["default"](labelRef.current, null, function () {
      setShowElement(true);
    }, 10);
    ioObserver.current = io;
    return function () {
      var _ioObserver$current;
      if (!lazyLoad || !labelRef.current) return;
      (_ioObserver$current = ioObserver.current) === null || _ioObserver$current === void 0 || _ioObserver$current.unobserve(labelRef.current);
      ioObserver.current = null;
    };
  };
  React.useEffect(handleLazyLoad, [lazyLoad, labelRef]);
  return {
    showElement: showElement
  };
}

exports["default"] = useElementLazyRender;
exports.useElementLazyRender = useElementLazyRender;
//# sourceMappingURL=useElementLazyRender.js.map
