/**
 * tdesign v1.7.1
 * (c) 2024 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var defineProperty = require('../_chunks/dep-ff9a5a06.js');
var React = require('react');
var classNames = require('classnames');
var isArray = require('../_chunks/dep-e7a0e8b4.js');
var _assignValue = require('../_chunks/dep-d93c04ca.js');
var keysIn = require('../_chunks/dep-d9f1fc69.js');
var merge = require('../_chunks/dep-be14ef0c.js');
var isArrayLike$1 = require('../_chunks/dep-3076c3e7.js');
var isTypedArray = require('../_chunks/dep-2caefa8e.js');
var keys$1 = require('../_chunks/dep-e38461b1.js');
var descriptions_defaultProps = require('./defaultProps.js');
var hooks_useDefaultProps = require('../hooks/useDefaultProps.js');
var hooks_useConfig = require('../hooks/useConfig.js');
var hooks_useCommonClassName = require('../hooks/useCommonClassName.js');
var common = require('../common.js');
var descriptions_DescriptionsContext = require('./DescriptionsContext.js');
var descriptions_DescriptionsItem = require('./DescriptionsItem.js');
var descriptions_Row = require('./Row.js');
require('../_chunks/dep-2a8c4619.js');
require('../_chunks/dep-9171afa5.js');
require('../_chunks/dep-7d38d5e1.js');
require('../_chunks/dep-a4fb1294.js');
require('../_chunks/dep-68d6ca4f.js');
require('../_chunks/dep-59101a1c.js');
require('../_chunks/dep-5ed3b3ae.js');
require('../_chunks/dep-8bb91473.js');
require('../_chunks/dep-4a411278.js');
require('../_chunks/dep-1c485dd2.js');
require('../_chunks/dep-315a4a2b.js');
require('../_chunks/dep-6bae679a.js');
require('../_chunks/dep-b54caa56.js');
require('../_chunks/dep-33b4bb35.js');
require('../_chunks/dep-bd15ffce.js');
require('../_chunks/dep-7b996f28.js');
require('../_chunks/dep-14dd074a.js');
require('../_chunks/dep-519d75c6.js');
require('../config-provider/ConfigContext.js');
require('../_common/js/global-config/locale/zh_CN.js');
require('../_chunks/dep-a4ac3164.js');
require('dayjs');
require('../_common/js/global-config/default-config.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var classNames__default = /*#__PURE__*/_interopDefaultLegacy(classNames);

var assignValue = _assignValue._assignValue,
  copyObject = keysIn._copyObject,
  createAssigner = merge._createAssigner,
  isArrayLike = isArrayLike$1.isArrayLike_1,
  isPrototype = isTypedArray._isPrototype,
  keys = keys$1.keys_1;

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Assigns own enumerable string keyed properties of source objects to the
 * destination object. Source objects are applied from left to right.
 * Subsequent sources overwrite property assignments of previous sources.
 *
 * **Note:** This method mutates `object` and is loosely based on
 * [`Object.assign`](https://mdn.io/Object/assign).
 *
 * @static
 * @memberOf _
 * @since 0.10.0
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @returns {Object} Returns `object`.
 * @see _.assignIn
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * function Bar() {
 *   this.c = 3;
 * }
 *
 * Foo.prototype.b = 2;
 * Bar.prototype.d = 4;
 *
 * _.assign({ 'a': 0 }, new Foo, new Bar);
 * // => { 'a': 1, 'c': 3 }
 */
var assign = createAssigner(function (object, source) {
  if (isPrototype(source) || isArrayLike(source)) {
    copyObject(source, keys(source), object);
    return;
  }
  for (var key in source) {
    if (hasOwnProperty.call(source, key)) {
      assignValue(object, key, source[key]);
    }
  }
});
var assign_1 = assign;

var Descriptions = function Descriptions(DescriptionsProps) {
  var props = hooks_useDefaultProps["default"](DescriptionsProps, descriptions_defaultProps.descriptionsDefaultProps);
  var className = props.className,
    style = props.style,
    title = props.title,
    bordered = props.bordered,
    column = props.column,
    layout = props.layout,
    rowItems = props.items,
    children = props.children;
  var _useConfig = hooks_useConfig["default"](),
    classPrefix = _useConfig.classPrefix;
  var COMPONENT_NAME = "".concat(classPrefix, "-descriptions");
  var _useCommonClassName = hooks_useCommonClassName["default"](),
    SIZE = _useCommonClassName.SIZE;
  var getRows = function getRows() {
    var items = [];
    if (isArray.isArray_1(rowItems)) {
      items = rowItems.map(function (item) {
        var _assign = assign_1({}, descriptions_defaultProps.descriptionItemDefaultProps, item),
          span = _assign.span;
        return {
          label: item.label,
          content: item.content,
          span: span
        };
      });
    } else {
      var childrenList = React__default["default"].Children.toArray(children).filter(function (child) {
        return child.type.displayName === descriptions_DescriptionsItem["default"].displayName;
      });
      if (childrenList.length !== 0) {
        items = childrenList.map(function (_ref) {
          var _child$content;
          var child = _ref.props;
          var _assign2 = assign_1({}, descriptions_defaultProps.descriptionItemDefaultProps, child),
            span = _assign2.span;
          return {
            label: child.label,
            content: (_child$content = child.content) !== null && _child$content !== void 0 ? _child$content : child.children,
            span: span
          };
        });
      }
    }
    if (layout === common.LayoutEnum.VERTICAL) {
      return [items];
    }
    var temp = [];
    var reset = column;
    var res = [];
    items.forEach(function (item, index) {
      var span = item.span;
      if (reset >= span) {
        temp.push(item);
        reset -= span;
      } else {
        res.push(temp);
        temp = [item];
        reset = column - span;
      }
      if (index === items.length - 1) {
        Reflect.set(item, "span", span + reset);
        res.push(temp);
      }
    });
    return res;
  };
  var renderHeader = function renderHeader() {
    return title ? /* @__PURE__ */React__default["default"].createElement("div", {
      className: "".concat(COMPONENT_NAME, "__header")
    }, title) : "";
  };
  var renderBody = function renderBody() {
    var tableClass = ["".concat(COMPONENT_NAME, "__body"), SIZE[props.size], defineProperty._defineProperty({}, "".concat(COMPONENT_NAME, "__body--border"), bordered)];
    return /* @__PURE__ */React__default["default"].createElement("table", {
      className: classNames__default["default"](tableClass)
    }, /* @__PURE__ */React__default["default"].createElement("tbody", null, getRows().map(function (row, i) {
      return /* @__PURE__ */React__default["default"].createElement(descriptions_Row["default"], {
        row: row,
        key: i
      });
    })));
  };
  return /* @__PURE__ */React__default["default"].createElement(descriptions_DescriptionsContext.DescriptionsContext.Provider, {
    value: props
  }, /* @__PURE__ */React__default["default"].createElement("div", {
    className: classNames__default["default"](className, COMPONENT_NAME),
    style: style
  }, renderHeader(), renderBody()));
};
Descriptions.displayName = "Descriptions";
Descriptions.DescriptionsItem = descriptions_DescriptionsItem["default"];

exports["default"] = Descriptions;
//# sourceMappingURL=Descriptions.js.map
