{"version":3,"file":"Layout.js","sources":["../../src/layout/Layout.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdLayoutProps, TdHeaderProps, TdFooterProps } from './type';\nimport Aside from './Aside';\n\nexport interface LayoutProps extends TdLayoutProps, StyledProps, React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\nexport interface HeaderProps extends TdHeaderProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface ContentProps extends StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface FooterProps extends TdFooterProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nconst Header: React.FC<HeaderProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n  const headerClassNames = classNames(`${classPrefix}-layout__header`, className);\n  return (\n    <header className={headerClassNames} style={{ height: renderHeight, ...style }} {...others}>\n      {children}\n    </header>\n  );\n};\n\nconst Footer: React.FC<FooterProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n  const footerClassNames = classNames(`${classPrefix}-layout__footer`, className);\n  return (\n    <footer className={footerClassNames} style={{ height: renderHeight, ...style }} {...others}>\n      {children}\n    </footer>\n  );\n};\n\nconst Content: React.FC<ContentProps> = (props) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const contentClassNames = classNames(`${classPrefix}-layout__content`, className);\n  return (\n    <main className={contentClassNames} style={style} {...others}>\n      {children}\n    </main>\n  );\n};\n\n/**\n * 布局组件\n */\nconst Layout: React.FC<LayoutProps> & {\n  Header: typeof Header;\n  Content: typeof Content;\n  Footer: typeof Footer;\n  Aside: typeof Aside;\n} = (props) => {\n  const { direction, className, style, children, ...otherLayoutProps } = props;\n\n  const shouldAsides = useMemo(() => {\n    const asides: React.ReactElement[] = [];\n    React.Children.forEach(children, (child: React.ReactElement) => {\n      if (!child || typeof child !== 'object') {\n        return;\n      }\n      if (child.type === Aside) {\n        asides.push(child);\n      }\n    });\n    return !!asides.length;\n  }, [children]);\n\n  const { classPrefix } = useConfig();\n  const layoutClassNames = classNames(\n    `${classPrefix}-layout`,\n    {\n      [`${classPrefix}-layout--with-sider`]: shouldAsides,\n      [`${classPrefix}-layout__direction-${direction}`]: direction,\n    },\n    className,\n  );\n\n  return (\n    <div className={layoutClassNames} style={style} {...otherLayoutProps}>\n      {children}\n    </div>\n  );\n};\n\nLayout.Header = Header;\nLayout.Content = Content;\nLayout.Footer = Footer;\nLayout.Aside = Aside;\n\nHeader.displayName = 'Header';\nContent.displayName = 'Content';\nFooter.displayName = 'Footer';\nLayout.displayName = 'Layout';\n\nexport default Layout;\n"],"names":["Header","props","_useConfig","useConfig","classPrefix","className","style","_props$style","children","height","others","_excluded","renderHeight","isNaN","Number","headerClassNames","classNames","concat","React","createElement","_objectSpread","Footer","_useConfig2","_props$style2","_excluded2","footerClassNames","Content","_useConfig3","_excluded3","contentClassNames","Layout","direction","otherLayoutProps","_excluded4","shouldAsides","useMemo","asides","Children","forEach","child","_typeof","type","Aside","push","length","_useConfig4","layoutClassNames","_defineProperty","displayName"],"mappings":"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"}