{"version":3,"file":"TabNav.js","sources":["../../src/tabs/TabNav.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport {\n  AddIcon as TdAddIcon,\n  ChevronLeftIcon as TdChevronLeftIcon,\n  ChevronRightIcon as TdChevronRightIcon,\n} from 'tdesign-icons-react';\nimport debounce from 'lodash/debounce';\nimport { TdTabsProps, TdTabPanelProps, TabValue } from './type';\nimport noop from '../_util/noop';\nimport { useTabClass } from './useTabClass';\nimport TabNavItem from './TabNavItem';\nimport TabBar from './TabBar';\nimport tabBase from '../_common/js/tabs/base';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport type { DragSortInnerProps } from '../_util/useDragSorter';\nimport parseTNode from '../_util/parseTNode';\n\nconst { moveActiveTabIntoView, calcScrollLeft, scrollToLeft, scrollToRight, calculateCanToLeft, calculateCanToRight } =\n  tabBase;\nexport interface TabNavProps extends TdTabsProps, DragSortInnerProps {\n  itemList: TdTabPanelProps[];\n  tabClick: (s: TabValue) => void;\n  activeValue: TabValue;\n  size?: 'medium' | 'large';\n  children?: React.ReactNode;\n}\n\nconst TabNav: React.FC<TabNavProps> = (props) => {\n  const {\n    placement = 'top',\n    itemList = [],\n    tabClick = noop,\n    theme,\n    addable,\n    onAdd,\n    size = 'medium',\n    disabled = false,\n    onRemove = noop,\n    onChange = noop,\n    activeValue,\n    children,\n    action,\n    getDragProps,\n  } = props;\n\n  const { AddIcon, ChevronLeftIcon, ChevronRightIcon } = useGlobalIcon({\n    AddIcon: TdAddIcon,\n    ChevronLeftIcon: TdChevronLeftIcon,\n    ChevronRightIcon: TdChevronRightIcon,\n  });\n\n  // 逻辑层较多处需要判断是否为 card 类型，进行逻辑抽象\n  const isCard = theme === 'card';\n\n  const { tdTabsClassGenerator, tdClassGenerator, tdSizeClassGenerator } = useTabClass();\n\n  const navsContainerRef = useRef<HTMLDivElement>(null);\n  // :todo 兼容老版本 TabBar 的实现\n  const navsWrapRef = useRef<HTMLDivElement>(null);\n  const getIndex = useCallback(\n    (value) => {\n      const index = itemList.findIndex((item) => item.value === value);\n      return index > -1 ? index : -1;\n    },\n    [itemList],\n  );\n\n  const activeIndex = getIndex(activeValue);\n\n  // 判断滚动条是否需要展示\n  const [canToLeft, setToLeftBtnVisible] = useState(false);\n  const [canToRight, setToRightBtnVisible] = useState(false);\n\n  // 滚动条 ref 定义\n  const scrollBarRef = useRef(null);\n  const leftOperationsRef = useRef(null);\n  const rightOperationsRef = useRef(null);\n  const toLeftBtnRef = useRef(null);\n  const toRightBtnRef = useRef(null);\n\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [activeTab, setActiveTab] = useState<HTMLElement>(null);\n\n  useEffect(() => {\n    const left = moveActiveTabIntoView(\n      {\n        activeTab,\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        toLeftBtn: toLeftBtnRef.current,\n        toRightBtn: toRightBtnRef.current,\n        leftOperations: leftOperationsRef.current,\n        rightOperations: rightOperationsRef.current,\n      },\n      scrollLeft,\n    );\n    setScrollLeft(left);\n  }, [activeTab, scrollLeft]);\n\n  // 调用检查函数，并设置左右滑动按钮的展示状态\n  const setScrollBtnVisibleHandler = useCallback(() => {\n    const canToleft = calculateCanToLeft(\n      {\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        leftOperations: leftOperationsRef.current,\n        toLeftBtn: toLeftBtnRef.current,\n      },\n      scrollLeft,\n      placement,\n    );\n    const canToRight = calculateCanToRight(\n      {\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        rightOperations: rightOperationsRef.current,\n        toRightBtn: toRightBtnRef.current,\n      },\n      scrollLeft,\n      placement,\n    );\n\n    setToLeftBtnVisible(canToleft);\n    setToRightBtnVisible(canToRight);\n    // children 发生变化也要触发一次切换箭头判断\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scrollLeft, placement, children]);\n\n  // 滚动条处理逻辑\n  const handleScroll = (position: 'left' | 'right') => {\n    const val =\n      position === 'left'\n        ? scrollToLeft(\n            {\n              navsContainer: navsContainerRef.current,\n              leftOperations: leftOperationsRef.current,\n              toLeftBtn: toLeftBtnRef.current,\n            },\n            scrollLeft,\n          )\n        : scrollToRight(\n            {\n              navsWrap: navsWrapRef.current,\n              navsContainer: navsContainerRef.current,\n              rightOperations: rightOperationsRef.current,\n              toRightBtn: toRightBtnRef.current,\n            },\n            scrollLeft,\n          );\n\n    setScrollLeft(val);\n  };\n\n  // handle window resize\n  useEffect(() => {\n    const onResize = debounce(() => {\n      if (['top', 'bottom'].includes(placement.toLowerCase())) {\n        const left = calcScrollLeft(\n          {\n            navsContainer: navsContainerRef.current,\n            navsWrap: navsWrapRef.current,\n            rightOperations: rightOperationsRef.current,\n          },\n          scrollLeft,\n        );\n        setScrollLeft(left);\n        setScrollBtnVisibleHandler();\n      }\n    }, 300);\n\n    window.addEventListener('resize', onResize);\n\n    return () => {\n      window.removeEventListener('resize', onResize);\n      onResize.cancel();\n    };\n  });\n\n  useEffect(() => {\n    if (['top', 'bottom'].includes(placement.toLowerCase())) {\n      const left = calcScrollLeft(\n        {\n          navsContainer: navsContainerRef.current,\n          navsWrap: navsWrapRef.current,\n          rightOperations: rightOperationsRef.current,\n        },\n        scrollLeft,\n      );\n      setScrollLeft(left);\n    }\n  }, [itemList.length, scrollLeft, placement]);\n\n  // TabBar 组件逻辑层抽象，卡片类型时无需展示，故将逻辑整合到此处\n  const TabBarCom = isCard ? null : (\n    <TabBar tabPosition={placement} activeId={activeIndex} containerRef={navsWrapRef} />\n  );\n\n  // 组件初始化后判断当前是否需要展示滑动按钮\n  useEffect(() => {\n    setScrollBtnVisibleHandler();\n  }, [setScrollBtnVisibleHandler]);\n\n  const handleTabItemRemove = (removeItem) => {\n    const { value: removeValue, index: removeIndex } = removeItem;\n    if (removeValue === activeValue) {\n      onChange(removeIndex === 0 ? itemList[removeIndex + 1]?.value : itemList[removeIndex - 1].value);\n    }\n    onRemove(removeItem);\n  };\n\n  const handleTabItemClick = (clickItem) => {\n    tabClick(clickItem.value);\n    if (activeValue !== clickItem.value) {\n      onChange(clickItem.value);\n    }\n    clickItem?.onClick?.(clickItem.value);\n  };\n\n  const handleTabAdd = (e) => {\n    onAdd({ e });\n  };\n\n  return (\n    <div ref={navsContainerRef} className={classNames(tdTabsClassGenerator('nav'))} style={{ minHeight: 48 }}>\n      <div\n        ref={leftOperationsRef}\n        className={classNames(tdTabsClassGenerator('operations'), tdTabsClassGenerator('operations--left'))}\n      >\n        {canToLeft ? (\n          <div\n            onClick={() => {\n              handleScroll('left');\n            }}\n            className={classNames(\n              tdTabsClassGenerator('btn'),\n              tdTabsClassGenerator('btn--left'),\n              tdSizeClassGenerator(size),\n            )}\n            ref={toLeftBtnRef}\n          >\n            <ChevronLeftIcon />\n          </div>\n        ) : null}\n      </div>\n      <div\n        ref={rightOperationsRef}\n        className={classNames(tdTabsClassGenerator('operations'), tdTabsClassGenerator('operations--right'))}\n      >\n        {canToRight ? (\n          <div\n            onClick={() => {\n              handleScroll('right');\n            }}\n            className={classNames(\n              tdTabsClassGenerator('btn'),\n              tdTabsClassGenerator('btn--right'),\n              tdSizeClassGenerator(size),\n            )}\n            ref={toRightBtnRef}\n          >\n            <ChevronRightIcon />\n          </div>\n        ) : null}\n        {addable ? (\n          <div\n            className={classNames(\n              tdTabsClassGenerator('add-btn'),\n              tdTabsClassGenerator('btn'),\n              tdSizeClassGenerator(size),\n            )}\n            onClick={handleTabAdd}\n          >\n            <AddIcon />\n          </div>\n        ) : null}\n        {action ? (\n          <div\n            className={classNames(\n              tdTabsClassGenerator('btn'),\n              tdTabsClassGenerator('nav-action'),\n              tdSizeClassGenerator(size),\n            )}\n          >\n            {parseTNode(action)}\n          </div>\n        ) : null}\n      </div>\n      <div\n        className={classNames(\n          tdTabsClassGenerator('nav-container'),\n          isCard ? tdTabsClassGenerator('nav--card') : '',\n          tdClassGenerator(`is-${placement}`),\n          addable ? tdClassGenerator('is-addable') : '',\n        )}\n      >\n        <div\n          className={classNames(\n            tdTabsClassGenerator('nav-scroll'),\n            canToLeft || canToRight ? tdClassGenerator('is-scrollable') : '',\n          )}\n          ref={scrollBarRef}\n        >\n          <div\n            className={classNames(\n              tdTabsClassGenerator('nav-wrap'),\n              ['left', 'right'].includes(placement) ? tdClassGenerator('is-vertical') : '',\n              tdClassGenerator('is-smooth'),\n            )}\n            style={{ transform: `translate(${-scrollLeft}px, 0)` }}\n            ref={navsWrapRef}\n          >\n            {placement !== 'bottom' ? TabBarCom : null}\n            {!isCard && (\n              <div className={classNames(tdTabsClassGenerator('bar'), tdClassGenerator(`is-${placement}`))} />\n            )}\n            {itemList.map((v, index) => (\n              <TabNavItem\n                {...props}\n                {...v}\n                dragProps={{ ...getDragProps?.(index, v) }}\n                // 显式给 onRemove 赋值，防止 props 的 onRemove 事件透传\n                onRemove={v.onRemove}\n                key={v.value}\n                label={v.label}\n                isActive={activeValue === v.value}\n                theme={theme}\n                placement={placement}\n                index={index}\n                disabled={disabled || v.disabled}\n                onClick={() => handleTabItemClick(v)}\n                onTabRemove={handleTabItemRemove}\n                innerRef={(ref) => {\n                  if (activeValue === v.value) {\n                    setActiveTab(ref);\n                  }\n                }}\n              />\n            ))}\n            {placement === 'bottom' ? TabBarCom : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nTabNav.displayName = 'TabNav';\n\nexport default TabNav;\n"],"names":["moveActiveTabIntoView","tabBase","calcScrollLeft","scrollToLeft","scrollToRight","calculateCanToLeft","calculateCanToRight","TabNav","props","_props$placement","placement","_props$itemList","itemList","_props$tabClick","tabClick","noop","theme","addable","onAdd","_props$size","size","_props$disabled","disabled","_props$onRemove","onRemove","_props$onChange","onChange","activeValue","children","action","getDragProps","_useGlobalIcon","useGlobalIcon","AddIcon","TdAddIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","isCard","_useTabClass","useTabClass","tdTabsClassGenerator","tdClassGenerator","tdSizeClassGenerator","navsContainerRef","useRef","navsWrapRef","getIndex","useCallback","value","index","findIndex","item","activeIndex","_useState","useState","_useState2","_slicedToArray","canToLeft","setToLeftBtnVisible","_useState3","_useState4","canToRight","setToRightBtnVisible","scrollBarRef","leftOperationsRef","rightOperationsRef","toLeftBtnRef","toRightBtnRef","_useState5","_useState6","scrollLeft","setScrollLeft","_useState7","_useState8","activeTab","setActiveTab","useEffect","left","navsContainer","current","navsWrap","toLeftBtn","toRightBtn","leftOperations","rightOperations","setScrollBtnVisibleHandler","canToleft","handleScroll","position","val","onResize","debounce","includes","toLowerCase","window","addEventListener","removeEventListener","cancel","length","TabBarCom","React","createElement","TabBar","tabPosition","activeId","containerRef","handleTabItemRemove","removeItem","removeValue","removeIndex","_itemList","handleTabItemClick","clickItem","_clickItem$onClick","onClick","call","handleTabAdd","e","ref","className","classNames","style","minHeight","parseTNode","concat","transform","map","v","TabNavItem","_objectSpread","dragProps","key","label","isActive","onTabRemove","innerRef","displayName"],"mappings":"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"}