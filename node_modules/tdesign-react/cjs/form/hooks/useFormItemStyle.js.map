{"version":3,"file":"useFormItemStyle.js","sources":["../../../src/form/hooks/useFormItemStyle.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../hooks/useConfig';\nimport parseTNode from '../../_util/parseTNode';\nimport { ValidateStatus } from '../const';\n\nexport default function useFormItemStyle(props) {\n  const { classPrefix } = useConfig();\n\n  const {\n    className,\n    help,\n    tips,\n    snakeName,\n    status,\n    successBorder,\n    errorList,\n    successList,\n    layout,\n    verifyStatus,\n    colon,\n    label,\n    labelWidth,\n    labelAlign,\n    requiredMark,\n    showErrorMessage,\n    innerRules,\n  } = props;\n\n  // 传入 status 时受控\n  const renderStatus = status || verifyStatus;\n\n  // help 文本\n  const helpNode = help && <div className={`${classPrefix}-input__help`}>{parseTNode(help)}</div>;\n\n  // 判断是否有星号\n  const needRequiredMark = requiredMark || (requiredMark ?? innerRules.filter((rule: any) => rule.required).length > 0);\n\n  // 提示文本\n  const extraNode = useMemo(() => {\n    let extra = tips ? (\n      <div className={`${classPrefix}-input__extra`} title={tips}>\n        {tips}\n      </div>\n    ) : null;\n\n    if (showErrorMessage && errorList?.[0]?.message) {\n      extra = (\n        <div className={`${classPrefix}-input__extra`} title={errorList[0].message}>\n          {errorList[0].message}\n        </div>\n      );\n    } else if (successList.length) {\n      extra = (\n        <div className={`${classPrefix}-input__extra`} title={successList[0].message}>\n          {successList[0].message}\n        </div>\n      );\n    }\n\n    return extra;\n  }, [showErrorMessage, errorList, successList, tips, classPrefix]);\n\n  const formItemClass = classNames(`${classPrefix}-form__item`, className, {\n    [`${classPrefix}-form-item__${snakeName}`]: snakeName,\n    [`${classPrefix}-form__item-with-help`]: helpNode,\n    [`${classPrefix}-form__item-with-extra`]: extraNode,\n  });\n\n  const formItemLabelClass = classNames(`${classPrefix}-form__label`, {\n    [`${classPrefix}-form__label--required`]: needRequiredMark,\n    [`${classPrefix}-form__label--colon`]: colon && label,\n    [`${classPrefix}-form__label--top`]: labelAlign === 'top' || !labelWidth,\n    [`${classPrefix}-form__label--left`]: labelAlign === 'left' && labelWidth,\n    [`${classPrefix}-form__label--right`]: labelAlign === 'right' && labelWidth,\n  });\n\n  const contentClass = () => {\n    const controlCls = `${classPrefix}-form__controls`;\n    if (!showErrorMessage) return controlCls;\n\n    const isSuccess = renderStatus === ValidateStatus.SUCCESS;\n    if (isSuccess) {\n      return classNames(controlCls, `${classPrefix}-is-success`, {\n        [`${classPrefix}-form--success-border`]: successBorder,\n      });\n    }\n\n    return classNames(controlCls, {\n      [`${classPrefix}-is-warning`]: renderStatus === 'warning',\n      [`${classPrefix}-is-error`]: ['fail', 'error'].includes(renderStatus),\n      [`${classPrefix}-form--has-error`]:\n        renderStatus === ValidateStatus.ERROR || renderStatus === ValidateStatus.WARNING,\n    });\n  };\n\n  let labelStyle = {};\n  let contentStyle = {};\n  if (label && labelWidth && labelAlign !== 'top') {\n    if (typeof labelWidth === 'number') {\n      labelStyle = { width: `${labelWidth}px` };\n      contentStyle = { marginLeft: layout !== 'inline' ? `${labelWidth}px` : '' };\n    } else {\n      labelStyle = { width: labelWidth };\n      contentStyle = { marginLeft: layout !== 'inline' ? labelWidth : '' };\n    }\n  }\n\n  return {\n    formItemClass,\n    formItemLabelClass,\n    contentClass,\n    labelStyle,\n    contentStyle,\n    helpNode,\n    extraNode,\n  };\n}\n"],"names":["useFormItemStyle","props","_useConfig","useConfig","classPrefix","className","help","tips","snakeName","status","successBorder","errorList","successList","layout","verifyStatus","colon","label","labelWidth","labelAlign","requiredMark","showErrorMessage","innerRules","renderStatus","helpNode","React","createElement","parseTNode","needRequiredMark","filter","rule","required","length","extraNode","useMemo","_errorList$","extra","title","message","formItemClass","classNames","concat","_defineProperty","formItemLabelClass","contentClass","controlCls","isSuccess","ValidateStatus","SUCCESS","includes","ERROR","WARNING","labelStyle","contentStyle","width","marginLeft"],"mappings":"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"}