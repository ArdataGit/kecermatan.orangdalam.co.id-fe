{"version":3,"file":"useMutationObserver.js","sources":["../../src/_util/useMutationObserver.ts"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport debounce from 'lodash/debounce';\n\nconst DEFAULT_OPTIONS = {\n  debounceTime: 0,\n  config: {\n    attributes: true,\n    childList: true,\n    characterData: true,\n    subtree: true,\n  } as MutationObserverInit,\n};\n\nexport default function useMutationObservable(\n  targetEl: HTMLElement | null,\n  cb: MutationCallback,\n  options = DEFAULT_OPTIONS,\n) {\n  const observeRef = useRef(null);\n\n  useEffect(() => {\n    if (!cb || typeof cb !== 'function') return;\n    const { debounceTime } = options;\n    observeRef.current = new MutationObserver(debounceTime > 0 ? debounce(cb, debounceTime) : cb);\n  }, [cb, options]);\n\n  useEffect(() => {\n    if (!targetEl || !targetEl?.nodeType) return;\n\n    const { config } = options;\n    try {\n      observeRef.current.observe(targetEl, config);\n    } catch (e) {\n      console.error(e);\n    }\n\n    return () => {\n      observeRef.current.disconnect();\n    };\n  }, [targetEl, options]);\n}\n"],"names":["DEFAULT_OPTIONS","debounceTime","config","attributes","childList","characterData","subtree","useMutationObservable","targetEl","cb","options","arguments","length","undefined","observeRef","useRef","useEffect","current","MutationObserver","debounce","nodeType","observe","e","console","error","disconnect"],"mappings":";;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,eAAkB,GAAA;AACtBC,EAAAA,YAAc,EAAA,CAAA;AACdC,EAAAA,MAAQ,EAAA;AACNC,IAAAA,UAAY,EAAA,IAAA;AACZC,IAAAA,SAAW,EAAA,IAAA;AACXC,IAAAA,aAAe,EAAA,IAAA;AACfC,IAAAA,OAAS,EAAA,IAAA;AACX,GAAA;AACF,CAAA,CAAA;AAEA,SAAwBC,qBACtBA,CAAAC,QAAA,EACAC,EACA,EACA;AAAA,EAAA,IADAC,OAAA,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAUX,eACV,CAAA;AACM,EAAA,IAAAc,UAAA,GAAaC,aAAO,IAAI,CAAA,CAAA;AAE9BC,EAAAA,eAAA,CAAU,YAAM;AACV,IAAA,IAAA,CAACP,EAAM,IAAA,OAAOA,EAAO,KAAA,UAAA,EAAY,OAAA;AAC/B,IAAA,IAAER,eAAiBS,OAAA,CAAjBT;AACGa,IAAAA,UAAA,CAAAG,OAAA,GAAU,IAAIC,gBAAiB,CAAAjB,YAAA,GAAe,IAAIkB,mBAAS,CAAAV,EAAA,EAAIR,YAAY,CAAA,GAAIQ,EAAE,CAAA,CAAA;AAC9F,GAAG,EAAA,CAACA,EAAI,EAAAC,OAAO,CAAC,CAAA,CAAA;AAEhBM,EAAAA,eAAA,CAAU,YAAM;IACV,IAAA,CAACR,QAAY,IAAA,EAACA,QAAU,KAAVA,IAAAA,IAAAA,QAAU,KAAVA,KAAAA,CAAAA,IAAAA,QAAU,CAAAY,QAAA,CAAU,EAAA,OAAA;AAEhC,IAAA,IAAElB,SAAWQ,OAAA,CAAXR;IACJ,IAAA;MACSY,UAAA,CAAAG,OAAA,CAAQI,OAAQ,CAAAb,QAAA,EAAUN,MAAM,CAAA,CAAA;aACpCoB,CAAP,EAAA;AACAC,MAAAA,OAAA,CAAQC,MAAMF,CAAC,CAAA,CAAA;AACjB,KAAA;AAEA,IAAA,OAAO,YAAM;AACXR,MAAAA,UAAA,CAAWG,QAAQQ,UAAW,EAAA,CAAA;KAChC,CAAA;AACF,GAAG,EAAA,CAACjB,QAAU,EAAAE,OAAO,CAAC,CAAA,CAAA;AACxB;;;;"}