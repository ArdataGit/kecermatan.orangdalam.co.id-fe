{"version":3,"file":"plugin.js","sources":["../../src/loading/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport { render, unmount } from '../_util/react-render';\nimport Loading, { LoadingProps } from './Loading';\nimport { LoadingInstance, TdLoadingProps } from './type';\n\nfunction createContainer(attach?: TdLoadingProps['attach']) {\n  if (typeof attach === 'string') return document.querySelector(attach);\n  if (typeof attach === 'function') return attach();\n  return document.body;\n}\n\nexport type LoadingPluginMethod = (options: boolean | LoadingProps) => LoadingInstance;\n\n// loading plugin形式\nexport const LoadingPlugin: LoadingPluginMethod = (options) => {\n  if (options === false) return { hide: () => null };\n\n  const props = typeof options === 'boolean' ? {} : options;\n  const { attach } = props;\n  const container = createContainer(attach);\n  const div = document.createElement('div');\n  div.setAttribute('style', 'width: 100%; height: 100%; position: absolute; top: 0;');\n\n  const defaultProps = {\n    loading: true,\n    attach: null,\n    fullscreen: !attach,\n    showOverlay: !!attach,\n  };\n\n  render(<Loading {...defaultProps} {...props} attach={null}></Loading>, div);\n\n  container.appendChild(div);\n\n  return {\n    hide: () => {\n      unmount(div);\n      div.remove();\n    },\n  };\n};\n"],"names":["createContainer","attach","document","querySelector","body","LoadingPlugin","options","hide","props","container","div","createElement","setAttribute","defaultProps","loading","fullscreen","showOverlay","render","React","Loading","_objectSpread","appendChild","unmount","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,SAASA,gBAAgBC,MAAmC,EAAA;EAC1D,IAAI,OAAOA,MAAW,KAAA,QAAA,EAAiB,OAAAC,QAAA,CAASC,cAAcF,MAAM,CAAA,CAAA;EACpE,IAAI,OAAOA,MAAW,KAAA,UAAA,EAAY,OAAOA,MAAO,EAAA,CAAA;EAChD,OAAOC,QAAS,CAAAE,IAAA,CAAA;AAClB,CAAA;IAKaC,aAAA,GAAqC,SAArCA,aAAAA,CAAsCC,OAAY,EAAA;AAC7D,EAAA,IAAIA,OAAY,KAAA,KAAA,EAAc,OAAA;IAAEC,IAAM,EAAA,SAAAA,IAAA,GAAA;AAAA,MAAA,OAAM,IAAK,CAAA;AAAA,KAAA;GAAA,CAAA;EAEjD,IAAMC,KAAQ,GAAA,OAAOF,OAAY,KAAA,SAAA,GAAY,EAAK,GAAAA,OAAA,CAAA;AAC5C,EAAA,IAAEL,SAAWO,KAAA,CAAXP;AACF,EAAA,IAAAQ,SAAA,GAAYT,gBAAgBC,MAAM,CAAA,CAAA;AAClC,EAAA,IAAAS,GAAA,GAAMR,QAAS,CAAAS,aAAA,CAAc,KAAK,CAAA,CAAA;AACpCD,EAAAA,GAAA,CAAAE,YAAA,CAAa,SAAS,wDAAwD,CAAA,CAAA;AAElF,EAAA,IAAMC,YAAe,GAAA;AACnBC,IAAAA,OAAS,EAAA,IAAA;AACTb,IAAAA,MAAQ,EAAA,IAAA;IACRc,YAAY,CAACd,MAAA;IACbe,WAAA,EAAa,CAAC,CAACf,MAAAA;GACjB,CAAA;AAEAgB,EAAAA,MAAA,iBAAQC,KAAA,CAAAP,aAAA,CAAAQ,OAAA,EAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAYP,EAAAA,EAAAA,YAAA,GAAkBL,KAAA,CAAA,EAAA,EAAA,EAAA;AAAOP,IAAAA,MAAQ,EAAA,IAAA;GAAM,CAAA,GAAYS,GAAG,CAAA,CAAA;AAE1ED,EAAAA,SAAA,CAAUY,YAAYX,GAAG,CAAA,CAAA;EAElB,OAAA;IACLH,MAAM,SAAAA,IAAAA,GAAM;MACVe,OAAA,CAAQZ,GAAG,CAAA,CAAA;MACXA,GAAA,CAAIa,MAAO,EAAA,CAAA;AACb,KAAA;GACF,CAAA;AACF;;;;"}