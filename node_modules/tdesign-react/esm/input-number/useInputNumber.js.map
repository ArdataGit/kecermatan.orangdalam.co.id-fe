{"version":3,"file":"useInputNumber.js","sources":["../../src/input-number/useInputNumber.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport { InputNumberValue, TdInputNumberProps } from './type';\n// 计算逻辑，统一到 common 中，方便各框架复用（如超过 16 位的大数处理）\nimport {\n  canAddNumber,\n  canInputNumber,\n  canReduceNumber,\n  formatUnCompleteNumber,\n  canSetValue,\n  getMaxOrMinValidateResult,\n  getStepValue,\n  formatThousandths,\n  largeNumberToFixed,\n} from '../_common/js/input-number/number';\nimport { InputProps } from '../input';\n\nexport const specialCode = ['-', '.', 'e', 'E'];\n\n/**\n * 独立一个组件 Hook 方便用户直接使用相关逻辑 自定义任何样式的数字输入框\n */\nexport default function useInputNumber<T extends InputNumberValue = InputNumberValue>(props: TdInputNumberProps<T>) {\n  const { SIZE, STATUS } = useCommonClassName();\n  const { classPrefix } = useConfig();\n  const [tValue, onChange] = useControlled(props, 'value', props.onChange);\n  const [userInput, setUserInput] = useState('');\n  const [displayValue, setDisplayValue] = useState('');\n  const [isError, setIsError] = useState<'exceed-maximum' | 'below-minimum'>();\n\n  const inputRef = useRef(null);\n\n  const { max, min, largeNumber, decimalPlaces, allowInputOverLimit, onValidate } = props;\n\n  const disabledReduce = props.disabled || !canReduceNumber(tValue, props.min, props.largeNumber);\n  const disabledAdd = props.disabled || !canAddNumber(tValue, props.max, props.largeNumber);\n\n  const wrapClasses = classNames(`${classPrefix}-input-number`, SIZE[props.size], {\n    [STATUS.disabled]: props.disabled,\n    [`${classPrefix}-is-controls-right`]: props.theme === 'column',\n    [`${classPrefix}-input-number--${props.theme}`]: props.theme,\n    [`${classPrefix}-input-number--auto-width`]: props.autoWidth,\n  });\n\n  const reduceClasses = classNames(`${classPrefix}-input-number__decrease`, { [STATUS.disabled]: disabledReduce });\n  const addClasses = classNames(`${classPrefix}-input-number__increase`, { [STATUS.disabled]: disabledAdd });\n\n  const getUserInput = (value: InputNumberValue) => {\n    if (!value && value !== 0) return '';\n    let inputStr = value || value === 0 ? String(value) : '';\n    if (!inputRef.current.currentElement.contains?.(document.activeElement)) {\n      const num = formatUnCompleteNumber(inputStr, {\n        decimalPlaces,\n        largeNumber,\n        isToFixed: true,\n      });\n      inputStr = num || num === 0 ? String(num) : '';\n      if (props.format) {\n        inputStr = String(props.format(value, { fixedNumber: inputStr }));\n      }\n    }\n    return inputStr;\n  };\n\n  useEffect(() => {\n    const inputValue = [undefined, null].includes(tValue) ? '' : String(tValue);\n    // userInput.value 为非合法数字，则表示用户正在输入，此时无需处理\n    if (!largeNumber && !Number.isNaN(userInput)) {\n      if (parseFloat(userInput) !== tValue) {\n        setUserInput(getUserInput(inputValue));\n      }\n      const fixedNumber = Number(largeNumberToFixed(inputValue, decimalPlaces, largeNumber));\n      if (\n        decimalPlaces !== undefined &&\n        ![undefined, null].includes(tValue) &&\n        Number(fixedNumber) !== Number(tValue)\n      ) {\n        onChange(fixedNumber as T, { type: 'props', e: undefined });\n      }\n    }\n    if (largeNumber) {\n      const tmpUserInput = getUserInput(inputValue);\n      setUserInput(tmpUserInput);\n      if (decimalPlaces !== undefined && largeNumberToFixed(inputValue, decimalPlaces, largeNumber) !== tValue) {\n        onChange(tmpUserInput as T, { type: 'props', e: undefined });\n      }\n    }\n    // eslint-disable-next-line\n  }, [tValue]);\n\n  useEffect(() => {\n    // @ts-ignore\n    if ([undefined, '', null].includes(tValue)) return;\n    const error = getMaxOrMinValidateResult({\n      value: tValue as InputNumberValue,\n      max,\n      min,\n      largeNumber,\n    });\n    setIsError(error);\n    onValidate?.({ error });\n  }, [tValue, max, min, largeNumber, onValidate]);\n\n  const handleStepValue = (op: 'add' | 'reduce') => {\n    const newValue = getStepValue({\n      op,\n      step: props.step,\n      max: props.max,\n      min: props.min,\n      lastValue: tValue,\n      largeNumber: props.largeNumber,\n    });\n    const { largeNumber, max, min } = props;\n    const overLimit = getMaxOrMinValidateResult({\n      value: newValue,\n      largeNumber,\n      max,\n      min,\n    });\n    return {\n      overLimit,\n      newValue,\n    };\n  };\n\n  const handleReduce = (e: any) => {\n    if (disabledReduce || props.readonly) return;\n    const r = handleStepValue('reduce');\n    if (r.overLimit && !allowInputOverLimit) return;\n    onChange(r.newValue, { type: 'reduce', e });\n  };\n\n  const handleAdd = (e: any) => {\n    if (disabledAdd || props.readonly) return;\n    const r = handleStepValue('add');\n    if (r.overLimit && !allowInputOverLimit) return;\n    onChange(r.newValue, { type: 'add', e });\n  };\n\n  // 1.2 -> 1. -> 1\n  const onInnerInputChange: InputProps['onChange'] = (inputValue, { e }) => {\n    // 处理千分位\n    const val = formatThousandths(inputValue);\n    if (!canInputNumber(val, largeNumber)) return;\n\n    setUserInput(val);\n\n    if (largeNumber) {\n      onChange(val as T, { type: 'input', e });\n      return;\n    }\n\n    if (canSetValue(String(val), Number(tValue))) {\n      const newVal = val === '' ? undefined : Number(val);\n      onChange(newVal as T, { type: 'input', e });\n    }\n  };\n\n  const handleBlur = (value: string, ctx: { e: React.FocusEvent<HTMLDivElement, Element> }) => {\n    if (!props.allowInputOverLimit && value !== undefined) {\n      const r = getMaxOrMinValidateResult({\n        value: tValue,\n        largeNumber,\n        max,\n        min,\n      });\n      if (r === 'below-minimum') {\n        onChange(min as T, { type: 'blur', e: ctx.e });\n        return;\n      }\n      if (r === 'exceed-maximum') {\n        onChange(max as T, { type: 'blur', e: ctx.e });\n        return;\n      }\n    }\n    const newValue = formatUnCompleteNumber(value, {\n      decimalPlaces,\n      largeNumber,\n    });\n    setUserInput(getUserInput(newValue));\n    if (newValue !== tValue) {\n      onChange(newValue as T, { type: 'blur', e: ctx.e });\n    }\n    props.onBlur?.(newValue, ctx);\n  };\n\n  const handleFocus = (_: string, ctx: { e: React.FocusEvent<HTMLDivElement, Element> }) => {\n    setUserInput(tValue as string);\n    props.onFocus?.(tValue as string, ctx);\n  };\n\n  const handleKeydown = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    const { e } = ctx;\n    const keyEvent = {\n      ArrowUp: handleAdd,\n      ArrowDown: handleReduce,\n    };\n\n    if (keyEvent[e.key] !== undefined) {\n      keyEvent[e.key](e);\n    }\n    props.onKeydown?.(value, ctx);\n  };\n\n  const handleKeyup = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    props.onKeyup?.(value, ctx);\n  };\n\n  const handleKeypress = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    props.onKeypress?.(value, ctx);\n  };\n\n  const handleEnter = (value: string, ctx: { e: React.KeyboardEvent<HTMLDivElement> }) => {\n    setUserInput(getUserInput(value));\n    const newValue = formatUnCompleteNumber(value, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber,\n    });\n    if (newValue !== value && String(newValue) !== value) {\n      onChange(newValue as T, { type: 'enter', e: ctx.e });\n    }\n    props.onEnter?.(newValue, ctx);\n  };\n\n  const handleClear: InputProps['onClear'] = ({ e }) => {\n    onChange(undefined, { type: 'clear', e });\n    setUserInput('');\n  };\n\n  const focus = () => {\n    inputRef.current.focus();\n  };\n\n  const blur = () => {\n    inputRef.current.blur();\n  };\n\n  const listeners = {\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    onKeydown: handleKeydown,\n    onKeyup: handleKeyup,\n    onKeypress: handleKeypress,\n    onEnter: handleEnter,\n    onClick: focus,\n    onClear: handleClear,\n  };\n\n  return {\n    classPrefix,\n    wrapClasses,\n    reduceClasses,\n    addClasses,\n    inputRef,\n    listeners,\n    displayValue,\n    setDisplayValue,\n    isError,\n    setIsError,\n    userInput,\n    setUserInput,\n    tValue,\n    focus,\n    blur,\n    onChange,\n    handleReduce,\n    handleAdd,\n    onInnerInputChange,\n  };\n}\n"],"names":["specialCode","useInputNumber","props","_useCommonClassName","useCommonClassName","SIZE","STATUS","_useConfig","useConfig","classPrefix","_useControlled","useControlled","onChange","_useControlled2","_slicedToArray","tValue","_useState","useState","_useState2","userInput","setUserInput","_useState3","_useState4","displayValue","setDisplayValue","_useState5","_useState6","isError","setIsError","inputRef","useRef","max","min","largeNumber","decimalPlaces","allowInputOverLimit","onValidate","disabledReduce","disabled","canReduceNumber","disabledAdd","canAddNumber","wrapClasses","classNames","concat","size","_defineProperty","theme","autoWidth","reduceClasses","addClasses","getUserInput","value","_inputRef$current$cur","_inputRef$current$cur2","inputStr","String","current","currentElement","contains","call","document","activeElement","num","formatUnCompleteNumber","isToFixed","format","fixedNumber","useEffect","inputValue","includes","Number","isNaN","parseFloat","largeNumberToFixed","type","e","tmpUserInput","error","getMaxOrMinValidateResult","handleStepValue","op","newValue","getStepValue","step","lastValue","overLimit","handleReduce","readonly","r","handleAdd","onInnerInputChange","_ref","val","formatThousandths","canInputNumber","canSetValue","newVal","handleBlur","ctx","_props$onBlur","onBlur","handleFocus","_","_props$onFocus","onFocus","handleKeydown","_props$onKeydown","keyEvent","ArrowUp","ArrowDown","key","onKeydown","handleKeyup","_props$onKeyup","onKeyup","handleKeypress","_props$onKeypress","onKeypress","handleEnter","_props$onEnter","onEnter","handleClear","_ref2","focus","blur","listeners","onClick","onClear"],"mappings":"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"}